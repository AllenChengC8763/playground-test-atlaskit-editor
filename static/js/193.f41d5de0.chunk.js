(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{1412:function(e,t,n){"use strict";n.r(t);var o,i=n(1),r=n(57),c=n.n(r),s=n(22),l=n(0),a=n(72),u=n(70),d=n(905),p=n(154),m=n(932),f=n(785),v=n(146),h=n(381),j=n(47),b=n(80),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollableDiv=null,t.reveal=function(e,n){if(e&&t.scrollableDiv){var o=Object(j.findDOMNode)(e),i=t.scrollableDiv.getBoundingClientRect(),r=o.getBoundingClientRect();n||r.top<i.top?t.scrollableDiv.scrollTop+=r.top-i.top:r.bottom>i.bottom&&(t.scrollableDiv.scrollTop+=r.bottom-i.bottom)}},t.scrollToBottom=function(){t.scrollableDiv&&(t.scrollableDiv.scrollTop=t.scrollableDiv.scrollHeight)},t.handleScroll=function(e){var n;if(t.scrollableDiv){var o=t.scrollableDiv.getBoundingClientRect();n=document.elementFromPoint(o.left+10,o.top+10)}t.props.onScroll&&n&&t.props.onScroll(n,e)},t.handleRef=function(e){t.scrollableDiv=e},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,o=e.maxHeight,i=e.onMouseLeave,r=["emoji-scrollable",b.t];n&&r.push(n);var s=o?{maxHeight:o}:{};return l.createElement("div",{className:c()(r),onMouseLeave:i,onScroll:this.handleScroll,ref:this.handleRef,style:s},t)},t}(l.PureComponent),g=n(941),E=n(40),S=Object(E.a)({background:"white",border:"1px solid "+v.h,borderRadius:v.i,boxShadow:v.j,color:"#333",width:v.g}),x=Object(E.a)({display:"none"}),k=Object(E.a)({cursor:"pointer",display:"block",listStyleType:"none",overflow:"hidden",width:v.g,$nest:(o={},o["&.emoji-typeahead-selected"]={backgroundColor:v.e},o)}),O=Object(E.a)({display:"flex",flexDirection:"row",flexWrap:"wrap",verticalAlign:"middle"}),P=Object(E.a)({position:"relative",height:v.f+"px",paddingTop:((v.f-30)/2).toFixed()+"px",boxSizing:"border-box"}),C=Object(E.a)({textAlign:"center"}),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEmojiSelected=function(e){var n=t.props,o=n.emoji,i=n.onSelection;Object(h.b)(e)&&i&&(e.preventDefault(),i(Object(u.q)(o),o,e))},t.onEmojiMenuItemMouseMove=function(e){var n=t.props,o=n.emoji,i=n.onMouseMove;i&&i(Object(u.q)(o),o,e)},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.selected,o=t.emoji,i=c()(((e={"ak-emoji-typeahead-item":!0})[k]=!0,e["emoji-typeahead-selected"]=n,e));return l.createElement("div",{className:i,onMouseDown:this.onEmojiSelected,onMouseMove:this.onEmojiMenuItemMouseMove,"data-emoji-id":o.shortName},l.createElement("div",{className:O},l.createElement(g.a,{emoji:o})))},t}(l.PureComponent);function T(e,t){for(var n=e.length,o=t;o<0&&n>0;)o+=n;return o%n}function I(e){return e.id||e.shortName+"-"+e.type}function M(e,t){var n=e&&e[t];if(n)return I(n)}var w=function(e){function t(t){var n=e.call(this,t)||this;return n.selectNext=function(){var e=T(n.props.emojis,n.state.selectedIndex+1);n.selectIndex(e)},n.selectPrevious=function(){var e=T(n.props.emojis,n.state.selectedIndex-1);n.selectIndex(e)},n.chooseCurrentSelection=function(){var e=n.props,t=e.emojis,o=e.onEmojiSelected,i=t[n.state.selectedIndex];Object(p.a)("ak-typeahead-list.chooseCurrentSelection",i),o&&o(Object(u.q)(i),i)},n.selectIndexOnHover=function(e,t,o){if(o){var i=Object(h.c)(o);Object(h.a)(n.lastMousePosition,i)&&n.selectByEmojiId(e),n.lastMousePosition=i}},n.itemSelected=function(e){n.selectByEmojiId(e,function(){n.chooseCurrentSelection()})},n.handleScrollableRef=function(e){n.scrollable=e},n.state={selectedKey:M(t.emojis,0),selectedIndex:0},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.emojis,n=this.state.selectedKey;if(n){for(var o=0;o<t.length;o++)if(n===t[o].id)return void this.setState({selectedIndex:o});this.selectIndexNewEmoji(0,t)}},t.prototype.componentDidUpdate=function(){var e=this.props.emojis,t=this.state.selectedIndex;if(e&&e[t]){var n=e[t];this.revealItem(n.id||n.shortName)}},t.prototype.revealItem=function(e){var t=this.items[e];t&&this.scrollable&&this.scrollable.reveal(t)},t.prototype.selectIndexNewEmoji=function(e,t){this.setState({selectedIndex:e,selectedKey:M(t,e)})},t.prototype.selectIndex=function(e,t){var n=this.props.emojis;this.setState({selectedIndex:e,selectedKey:M(n,e)},t)},t.prototype.selectByEmojiId=function(e,t){for(var n=this.props.emojis,o=0;o<n.length;o++){if(n[o].id===e.id)return void this.selectIndex(o,t)}for(o=0;o<n.length;o++){if(n[o].shortName===e.shortName)return void this.selectIndex(o,t)}},t.prototype.renderItems=function(e){var t=this;return e&&e.length?(this.items={},l.createElement("div",null,e.map(function(e,n){var o=I(e);return l.createElement(N,{emoji:e,key:o,selected:t.isSelectedEmoji(e,n),onMouseMove:t.selectIndexOnHover,onSelection:t.itemSelected,ref:function(e){e?t.items[o]=e:delete t.items[o]}})}))):null},t.prototype.isSelectedEmoji=function(e,t){var n=this.state.selectedKey;return n?n===e.id:0===t},t.prototype.render=function(){var e,t,n=this.props,o=n.emojis,i=n.loading,r=o&&o.length,s=c()(((e={"ak-emoji-typeahead-list":!0})[S]=!0,e[x]=!r&&!i,e));return t=i?l.createElement("div",{className:P},l.createElement("div",{className:C},l.createElement(f.a,{size:"medium"}))):this.renderItems(o),l.createElement("div",{className:"emoji-typeahead-list-container"},l.createElement("div",{className:s},l.createElement(y,{ref:this.handleScrollableRef,maxHeight:v.f+"px"},t)))},t.defaultProps={onEmojiSelected:function(){}},t}(l.PureComponent),D=function(e){return e&&e.length>1&&":"===e.charAt(0)&&":"===e.charAt(e.length-1)},_=function(e,t){var n,o;if(t){var r;t=t.toLowerCase();var c=0;try{for(var s=i.__values(e.emojis),l=s.next();!l.done;l=s.next()){var a=l.value;if(t&&a.shortName.toLowerCase()===t){if(void 0!==r)return;r=c}c++}}catch(u){n={error:u}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return r}},R=function(e){function t(t){var n=e.call(this,t)||this;return n.emojiListRef=null,n.selectNext=function(){n.emojiListRef&&n.emojiListRef.selectNext()},n.selectPrevious=function(){n.emojiListRef&&n.emojiListRef.selectPrevious()},n.chooseCurrentSelection=function(){n.emojiListRef&&n.emojiListRef.chooseCurrentSelection()},n.count=function(){var e=n.state.emojis;return e&&e.length||0},n.onSearchResult=function(e){var t=e.emojis,o=e.query,i=n.state.visible,r=t.length>0;if(Object(p.a)("emoji-typeahead.applyPropChanges",t.length,i,r),n.setState({emojis:t,visible:r,loading:!1}),D(o)){var c=_(e,o);if(void 0!==c)Object(m.a)(n.props.emojiProvider,n.props.onSelection)(Object(u.q)(e.emojis[c]),e.emojis[c])}i!==r&&(r?n.props.onOpen&&n.props.onOpen():n.props.onClose&&n.props.onClose())},n.onProviderChange={result:n.onSearchResult},n.onEmojiListRef=function(e){n.emojiListRef=e},n.state={visible:!0,emojis:[],loading:!0,selectedTone:t.emojiProvider.getSelectedTone()},n.props.onOpen&&n.props.onOpen(),n}return i.__extends(t,e),t.prototype.getChildContext=function(){return{emoji:{emojiProvider:this.props.emojiProvider}}},t.prototype.componentDidMount=function(){this.props.emojiProvider.subscribe(this.onProviderChange),this.onSearch(this.props.query)},t.prototype.componentWillUnmount=function(){this.props.emojiProvider.unsubscribe(this.onProviderChange)},t.prototype.componentWillReceiveProps=function(e){var t=this.props.emojiProvider,n=e.emojiProvider;t!==n?(t.unsubscribe(this.onProviderChange),n.subscribe(this.onProviderChange),this.onSearch(e.query)):this.props.query!==e.query&&this.onSearch(e.query)},t.prototype.onSearch=function(e){var t=this.props,n=t.emojiProvider,o={limit:t.listLimit||a.g,skinTone:this.state.selectedTone};e&&e.replace(":","").length>0?o.sort=d.a.Default:o.sort=d.a.UsageFrequency,n.filter(e,o)},t.prototype.render=function(){var e=this.props,t=e.emojiProvider,n=e.onSelection,o=Object(m.a)(t,n),i=this.state,r=i.visible,s=i.emojis,a=i.loading,u={display:r?"block":"none"},d=c()(["ak-emoji-typeahead","emoji-typeahead-element"]);return l.createElement("div",{style:u,className:d},l.createElement(w,{emojis:s,onEmojiSelected:o,ref:this.onEmojiListRef,loading:a}))},t.childContextTypes={emoji:s.object},t.defaultProps={onSelection:function(){},onOpen:function(){},onClose:function(){},listLimit:a.g},t}(l.PureComponent);t.default=R},894:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"g",function(){return a}),n.d(t,"b",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"i",function(){return m}),n.d(t,"k",function(){return v}),n.d(t,"m",function(){return h}),n.d(t,"l",function(){return j}),n.d(t,"n",function(){return y}),n.d(t,"p",function(){return g}),n.d(t,"o",function(){return E}),n.d(t,"r",function(){return S}),n.d(t,"q",function(){return x}),n.d(t,"d",function(){return k}),n.d(t,"f",function(){return O}),n.d(t,"e",function(){return P}),n.d(t,"j",function(){return C});var o=n(1),i=n(846),r=n(931),c=Object(i.a)("fabric-elements"),s=function(e,t,n,i,c){return void 0===c&&(c={}),{eventType:e,action:t,actionSubject:n,actionSubjectId:i,attributes:o.__assign({packageName:r.a,packageVersion:r.b},c)}},l=function(e,t,n){return void 0===t&&(t={}),s("ui",e,"emojiPicker",n,t)},a=function(){return l("opened")},u=function(e){return l("closed",e)},d=function(e){return l("clicked",e,"emoji")},p=function(e){return l("clicked",e,"category")},m=function(e){return l("searched",e,"query")},f=function(e,t){return void 0===t&&(t={}),s("ui",e,"emojiSkintoneSelector",void 0,t)},v=function(e){return f("clicked",e)},h=function(e){return f("opened",e)},j=function(){return f("cancelled")},b=function(e,t,n){return s("ui",e,"emojiUploader",t,n)},y=function(){return b("clicked","addButton")},g=function(e){return b("clicked","confirmButton",e)},E=function(){return b("clicked","cancelButton")},S=function(e){return s("operational","finished","emojiUploader",void 0,e)},x=function(e){return s("operational","failed","emojiUploader",void 0,e)},k=function(e){return s("ui","clicked","emojiPicker","deleteEmojiTrigger",e)},O=function(e){return s("ui","clicked","emojiPicker","deleteEmojiConfirm",e)},P=function(e){return s("ui","clicked","emojiPicker","deleteEmojiCancel",e)},C=function(){return s("ui","clicked","emojiUploader","selectFile")}},905:function(e,t,n){"use strict";var o;n.d(t,"a",function(){return o}),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.UsageFrequency=2]="UsageFrequency"}(o||(o={}))},931:function(e){e.exports={a:"@atlaskit/emoji",b:"59.2.4"}},932:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(e,t){return function(n,o,i){try{e.recordSelection&&o&&e.recordSelection(o)}finally{t&&t(n,o,i)}}}},936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),i=r(n(24));function r(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(i.default,c({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M13 11V3.993A.997.997 0 0 0 12 3c-.556 0-1 .445-1 .993V11H3.993A.997.997 0 0 0 3 12c0 .557.445 1 .993 1H11v7.007c0 .548.448.993 1 .993.556 0 1-.445 1-.993V13h7.007A.997.997 0 0 0 21 12c0-.556-.445-1-.993-1H13z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};s.displayName="AddIcon";var l=s;t.default=l},941:function(e,t,n){"use strict";var o=n(1),i=n(784),r=n(936),c=n.n(r),s=n(57),l=n.n(s),a=n(0),u=n(12),d=n(380),p=n(80),m=n(299),f=n(381),v=function(e){var t=e.emoji,n=e.selectOnHover,o=[p.l];return a.createElement("button",{className:l()(o),onMouseDown:function(t){!function(e,t){var n=e.onSelected;t.preventDefault(),n&&Object(f.b)(t)&&n()}(e,t)}},a.createElement(m.a,{emoji:t,selectOnHover:n}))},h=n(168),j=n(780),b=n(894),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToneSelectedHandler=function(e){(0,t.props.onToneSelected)(e);t.fireEvent(Object(b.k)({skinToneModifier:["default","light","mediumLight","medium","mediumDark","dark"][e]}))},t}return o.__extends(t,e),t.prototype.fireEvent=function(e){var t=this.props.createAnalyticsEvent;t&&Object(b.c)(e)(t)},t.prototype.componentWillMount=function(){this.fireEvent(Object(b.m)({}))},t.prototype.render=function(){var e=this,t=function(e){return e.skinVariations?o.__spread([e],e.skinVariations):[e]}(this.props.emoji);return a.createElement("div",null,t.map(function(t,n){return a.createElement(v,{key:""+t.id,onSelected:function(){return e.onToneSelectedHandler(n)},emoji:t,selectOnHover:!0})}))},t}(a.PureComponent),g=Object(j.a)()(y),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectingTone:!1},t.onToneButtonClick=function(){t.setState({selectingTone:!0})},t.onToneSelected=function(e){t.setState({selectingTone:!1}),t.props.onToneSelected&&t.props.onToneSelected(e)},t.onMouseLeave=function(){var e=t.state.selectingTone,n=t.props.onToneSelectorCancelled;e&&n&&n(),t.setState({selectingTone:!1})},t}return o.__extends(t,e),t.prototype.renderTones=function(){var e=this,t=this.props,n=t.toneEmoji,o=t.selectedTone;if(!n)return null;if(this.state.selectingTone)return a.createElement("div",{className:p.I},a.createElement(g,{emoji:n,onToneSelected:this.onToneSelected}));var i=n;return o&&i.skinVariations&&(i=i.skinVariations[(o||1)-1]),a.createElement("div",{className:p.e},a.createElement(v,{emoji:i,onSelected:function(){return e.onToneButtonClick()},selectOnHover:!0}))},t.prototype.renderEmojiPreview=function(){var e,t,n=this.state.selectingTone,o=this.props,i=o.emoji,r=o.uploadEnabled;if(!i||n||r)return null;var c=l()(((e={})[p.A]=!0,e[p.T]=!!this.props.toneEmoji,e)),s=l()(((t={})[p.E]=!0,t[p.D]=!i.name,t));return a.createElement("div",{className:c},a.createElement("span",{className:p.C},a.createElement(d.a,{emoji:i})),a.createElement("div",{className:s},a.createElement("span",{className:p.x},i.name),a.createElement("span",{className:p.H},i.shortName)))},t.prototype.renderAddOwnEmoji=function(){var e=this.props,t=e.onOpenUpload,n=e.uploadEnabled,r=this.state.selectingTone;return!n||r?null:a.createElement("div",{className:p.a},a.createElement(u.a,o.__assign({},h.a.addCustomEmojiLabel),function(e){return a.createElement(i.a,{onClick:t,iconBefore:a.createElement(c.a,{label:e,size:"small"}),appearance:"subtle",className:p.b+" emoji-picker-add-emoji"},e)}))},t.prototype.render=function(){var e=l()([p.q,p.s]);return a.createElement("div",{className:e,onMouseLeave:this.onMouseLeave},this.renderAddOwnEmoji(),this.renderEmojiPreview(),this.renderTones())},t}(a.PureComponent);t.a=E}}]);
//# sourceMappingURL=193.f41d5de0.chunk.js.map