{"version":3,"sources":["../node_modules/@atlaskit/media-editor/react/editorView/errorView/styles.js","../node_modules/@atlaskit/media-editor/react/editorView/errorView/icons.js","../node_modules/@atlaskit/media-editor/react/editorView/errorView/errorView.js","../node_modules/@atlaskit/media-editor/react/smartMediaEditor.js","../node_modules/@atlaskit/media-ui/messages.js","../node_modules/@atlaskit/media-ui/shortcut.js"],"names":["templateObject_1","templateObject_2","templateObject_3","templateObject_4","ErrorPopup","styled_components_browser_esm","div","tslib_es6","_atlaskit_theme","N0","ErrorIconWrapper","ErrorMessage","N900","ErrorHint","N70","styles_ErrorButton","props","react","Button","theme","currentTheme","themeProps","_a","buttonStyles","rest","display","width","margin","justifyContent","errorIcon","viewBox","id","x1","y1","x2","y2","gradientUnits","offset","stopColor","className","d","errorView_ErrorView","_super","ErrorView","apply","this","arguments","prototype","render","styles","message","renderHint","renderTryAgainButton","renderCancelButton","onRetry","formatMessage","intl","messages","error_hint_retry","error_hint_critical","appearance","onClick","try_again","onCancel","cancel","close","errorView","Object","index_es","__webpack_require__","__webpack_exports__","convertFileNameToPng","smartMediaEditor_SmartMediaEditor","fileName","endsWith","lastIndexOf","substring","SmartMediaEditor","_this","state","hasError","hasBeenEdited","closeIntent","getFile","identifier","context","collectionName","occurrenceKey","getFileSubscription","label","sent","file","getFileState","subscribe","next","name","preview","status","value","imageUrl","onError","setTimeout","unsubscribe","setRemoteImageUrl","Blob","util","setState","error","_error","getImageUrl","collection","mode","copyFileToUserCollection","fileId","_b","_c","userAuthProvider","authProvider","source","destination","_d","config","v4_default","copyFile","onSave","imageData","dimensions","onUploadStart","onFinish","uploadableFile","content","uploadableFileUpfrontIds","deferredUploadId","touchFiles","then","touchedFiles","created","uploadId","uploadingFileStateSubscription","upload","undefined","fileState","could_not_save_image","mediaItemType","onAnyEdit","closeConfirmationDialog","closeAnyway","renderDeleteConfirmation","actions","text","annotate_confirmation_close_anyway","ModalTransition","ModalWrapper","heading","annotate_confirmation_heading","onClose","annotate_confirmation_content","errorMessage","clickShellNotPass","e","stopPropagation","renderLoading","styled","Spinner","size","invertColor","renderEditor","editorView","renderError","Error","componentDidMount","componentWillReceiveProps","nextProps","componentWillUnmount","uploadFileSubscription","shortcut","keyCode","handler","contextTypes","smartMediaEditor_default_1","default_1","Component","locale","react_intl__WEBPACK_IMPORTED_MODULE_0__","retry","defaultMessage","description","failed_to_load","recent_uploads","upload_file","drag_and_drop_your_files","drop_your_files","search_all_gifs","cant_retrieve_gifs","check_your_network","no_gifs_found","no_gifs_found_suggestion","load_more_gifs","add_account","unlink_account","upload_file_from","connect_to","connect_account_description","upload_an_avatar","save","or","upload_photo","default_avatars","drag_and_drop_images_here","upload_image","image_url_invalid_error","image_format_invalid_error","image_size_too_large_error","something_went_wrong","might_be_a_hiccup","couldnt_generate_preview","cant_preview_file_type","item_not_found_in_list","no_pdf_artifacts","give_feedback","try_downloading_file","webgl_warning_description","unable_to_annotate_image","learn_more","accounts","could_not_load_editor","annotate","annotate_tool_arrow","annotate_tool_text","annotate_tool_shape","annotate_tool_brush","annotate_tool_blur","annotate_tool_line_thickness","annotate_tool_color","drop_your_files_here","share_files_instantly","insert_files","zoom_out","zoom_in","remove_image","play","pause","disable_fullscreen","enable_fullscreen","error_loading_file","error_generating_preview","download","unknown","document","audio","video","image","keyCodes","Shortcut","tslib__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","space","m","keyHandler","init","addEventListener","release","removeEventListener"],"mappings":"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","file":"static/js/196.6f04de95.chunk.js","sourcesContent":["import * as tslib_1 from \"tslib\";\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { colors } from '@atlaskit/theme';\nimport Button from '@atlaskit/button';\nexport var ErrorPopup = styled.div(templateObject_1 || (templateObject_1 = tslib_1.__makeTemplateObject([\"\\n  width: 290px;\\n  padding: 16px;\\n  background-color: \", \";\\n  border-radius: 4px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n\"], [\"\\n  width: 290px;\\n  padding: 16px;\\n  background-color: \", \";\\n  border-radius: 4px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n\"])), colors.N0);\nexport var ErrorIconWrapper = styled.div(templateObject_2 || (templateObject_2 = tslib_1.__makeTemplateObject([\"\\n  width: 92px;\\n\"], [\"\\n  width: 92px;\\n\"])));\nexport var ErrorMessage = styled.div(templateObject_3 || (templateObject_3 = tslib_1.__makeTemplateObject([\"\\n  color: \", \";\\n  margin-top: 16px;\\n  margin-bottom: 4px;\\n  width: 256px;\\n  text-align: center;\\n  font-weight: bold;\\n\"], [\"\\n  color: \", \";\\n  margin-top: 16px;\\n  margin-bottom: 4px;\\n  width: 256px;\\n  text-align: center;\\n  font-weight: bold;\\n\"])), colors.N900);\nexport var ErrorHint = styled.div(templateObject_4 || (templateObject_4 = tslib_1.__makeTemplateObject([\"\\n  color: \", \";\\n  margin-top: 4px;\\n  margin-bottom: 20px;\\n  width: 256px;\\n  text-align: center;\\n\"], [\"\\n  color: \", \";\\n  margin-top: 4px;\\n  margin-bottom: 20px;\\n  width: 256px;\\n  text-align: center;\\n\"])), colors.N70);\nexport var ErrorButton = function ErrorButton(props) {\n  return React.createElement(Button, tslib_1.__assign({}, props, {\n    theme: function theme(currentTheme, themeProps) {\n      var _a = currentTheme(themeProps),\n          buttonStyles = _a.buttonStyles,\n          rest = tslib_1.__rest(_a, [\"buttonStyles\"]);\n\n      return tslib_1.__assign({\n        buttonStyles: tslib_1.__assign({}, buttonStyles, {\n          display: 'inline-flex',\n          width: '84px',\n          margin: '2px',\n          justifyContent: 'center'\n        })\n      }, rest);\n    }\n  }));\n};\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;","import * as React from 'react';\nvar style = \"\\n.cls-1{fill:url(#linear-gradient);}\\n.cls-2{fill:#253858;}\\n.cls-3{fill:#ffc400;}\\n.cls-4{fill:#ffab00;}\\n.cls-5,.cls-6{fill:none;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;}\\n.cls-5{stroke:#344563;}\\n.cls-6{stroke:#5e6c84;}\\n\";\nexport var errorIcon = React.createElement(\"svg\", {\n  viewBox: \"0 0 163.28 218\"\n}, React.createElement(\"defs\", null, React.createElement(\"style\", null, style), React.createElement(\"linearGradient\", {\n  id: \"linear-gradient\",\n  x1: \"133.86\",\n  y1: \"136.43\",\n  x2: \"-2.79\",\n  y2: \"200.15\",\n  gradientUnits: \"userSpaceOnUse\"\n}, React.createElement(\"stop\", {\n  offset: \"0\",\n  stopColor: \"#ffd740\"\n}), React.createElement(\"stop\", {\n  offset: \"1\",\n  stopColor: \"#ffab00\"\n})), React.createElement(\"clipPath\", null, React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M94.78,80.16l66.44,115.08A15.17,15.17,0,0,1,148.08,218H15.2A15.17,15.17,0,0,1,2.06,195.24L68.5,80.16A15.17,15.17,0,0,1,94.78,80.16Z\"\n}))), React.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M94.78,80.16l66.44,115.08A15.17,15.17,0,0,1,148.08,218H15.2A15.17,15.17,0,0,1,2.06,195.24L68.5,80.16A15.17,15.17,0,0,1,94.78,80.16Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M87.22,163.71l2.88-44.35a9.18,9.18,0,0,0-9.16-9.78h0a9.18,9.18,0,0,0-9.16,9.78l2.88,44.35a6.3,6.3,0,0,0,6.28,5.89h0A6.3,6.3,0,0,0,87.22,163.71Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M71.38,187.25a9.53,9.53,0,0,0,10.39,9.58,9.68,9.68,0,0,0-.9-19.32A9.64,9.64,0,0,0,71.38,187.25Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M91.7,27.17,84.29.45A.61.61,0,0,0,83.1.5L78.44,25.6l-5.8-1.08a.61.61,0,0,0-.7.76L79.35,52A.61.61,0,0,0,80.54,52l4.66-25.1L91,27.93A.61.61,0,0,0,91.7,27.17Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-4\",\n  d: \"M65.12,41.81,54.24,33.26a.27.27,0,0,0-.41.33L59.36,45,56.7,46.31a.27.27,0,0,0,0,.45l10.87,8.55a.27.27,0,0,0,.41-.33L62.41,43.55l2.66-1.29A.27.27,0,0,0,65.12,41.81Z\"\n}), React.createElement(\"path\", {\n  className: \"cls-5\",\n  d: \"M115.15,36.6c-1.17,1.59-11-5.6-12.16-4s8.66,8.79,7.5,10.39-11-5.6-12.17-4,8.66,8.79,7.49,10.39-11-5.6-12.17-4,8.66,8.79,7.49,10.39\"\n}), React.createElement(\"path\", {\n  className: \"cls-6\",\n  d: \"M119.92,64.19c-1.46,1.33-7.05-4.78-8.51-3.44s4.13,7.45,2.67,8.78-7.05-4.78-8.51-3.44c-.68.62.16,2.27,1.11,4\"\n}), React.createElement(\"path\", {\n  className: \"cls-6\",\n  d: \"M44.8,64c1.82.77,5-6.87,6.86-6.1s-1.39,8.4.43,9.17,5-6.87,6.86-6.1c.85.36.61,2.19.29,4.13\"\n}))));","import * as tslib_1 from \"tslib\";\nimport * as React from 'react';\nimport { Component } from 'react';\nimport { messages } from '@atlaskit/media-ui';\nimport { injectIntl } from 'react-intl';\nimport { ErrorPopup, ErrorIconWrapper, ErrorMessage, ErrorHint, ErrorButton } from './styles';\nimport { errorIcon } from './icons';\nimport { EditorContainer } from '../styles';\n\nvar ErrorView =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(ErrorView, _super);\n\n  function ErrorView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ErrorView.prototype.render = function () {\n    return React.createElement(EditorContainer, null, React.createElement(ErrorPopup, null, React.createElement(ErrorIconWrapper, null, errorIcon), React.createElement(ErrorMessage, null, this.props.message), React.createElement(ErrorHint, null, this.renderHint()), this.renderTryAgainButton(), this.renderCancelButton()));\n  };\n\n  ErrorView.prototype.renderHint = function () {\n    var _a = this.props,\n        onRetry = _a.onRetry,\n        formatMessage = _a.intl.formatMessage;\n\n    if (onRetry) {\n      return React.createElement(\"span\", null, formatMessage(messages.error_hint_retry));\n    }\n\n    return React.createElement(\"span\", null, formatMessage(messages.error_hint_critical));\n  };\n\n  ErrorView.prototype.renderTryAgainButton = function () {\n    var _a = this.props,\n        onRetry = _a.onRetry,\n        formatMessage = _a.intl.formatMessage;\n\n    if (onRetry) {\n      return React.createElement(ErrorButton, {\n        appearance: \"primary\",\n        onClick: onRetry\n      }, formatMessage(messages.try_again));\n    }\n\n    return null;\n  };\n\n  ErrorView.prototype.renderCancelButton = function () {\n    var _a = this.props,\n        onCancel = _a.onCancel,\n        onRetry = _a.onRetry,\n        formatMessage = _a.intl.formatMessage;\n    var message = onRetry ? messages.cancel : messages.close;\n    return React.createElement(ErrorButton, {\n      appearance: \"subtle\",\n      onClick: onCancel\n    }, formatMessage(message));\n  };\n\n  return ErrorView;\n}(Component);\n\nexport { ErrorView };\nexport default injectIntl(ErrorView);","import * as tslib_1 from \"tslib\";\nimport * as React from 'react';\nimport uuidV4 from 'uuid/v4';\nimport { intlShape, IntlProvider, injectIntl } from 'react-intl';\nimport { messages, Shortcut } from '@atlaskit/media-ui';\nimport ModalDialog, { ModalTransition } from '@atlaskit/modal-dialog';\nimport Spinner from '@atlaskit/spinner';\nimport EditorView from './editorView/editorView';\nimport { Blanket, SpinnerWrapper } from './styled';\nimport { fileToBase64 } from '../util';\nimport ErrorView from './editorView/errorView/errorView';\nexport var convertFileNameToPng = function convertFileNameToPng(fileName) {\n  if (!fileName) {\n    return 'annotated-image.png';\n  }\n\n  if (fileName.endsWith('.png')) {\n    return fileName;\n  } else {\n    if (fileName.lastIndexOf('.') === 0 || fileName.lastIndexOf('.') === -1) {\n      return fileName + \".png\";\n    } else {\n      return fileName.substring(0, fileName.lastIndexOf('.')) + \".png\";\n    }\n  }\n};\n\nvar SmartMediaEditor =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SmartMediaEditor, _super);\n\n  function SmartMediaEditor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hasError: false,\n      hasBeenEdited: false,\n      closeIntent: false\n    };\n\n    _this.getFile = function (identifier) {\n      return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var context, collectionName, occurrenceKey, id, getFileSubscription;\n\n        var _this = this;\n\n        return tslib_1.__generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              context = this.props.context;\n              collectionName = identifier.collectionName, occurrenceKey = identifier.occurrenceKey;\n              return [4\n              /*yield*/\n              , identifier.id];\n\n            case 1:\n              id = _a.sent();\n              getFileSubscription = context.file.getFileState(id, {\n                collectionName: collectionName,\n                occurrenceKey: occurrenceKey\n              }).subscribe({\n                next: function next(state) {\n                  return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                    var name, preview, status, value, imageUrl;\n                    return tslib_1.__generator(this, function (_a) {\n                      switch (_a.label) {\n                        case 0:\n                          if (state.status === 'error') {\n                            this.onError(state.message);\n                            setTimeout(function () {\n                              return getFileSubscription.unsubscribe();\n                            }, 0);\n                            return [2\n                            /*return*/\n                            ];\n                          }\n\n                          name = state.name, preview = state.preview, status = state.status;\n                          this.fileName = name;\n                          if (!(status === 'processed')) return [3\n                          /*break*/\n                          , 1];\n                          this.setRemoteImageUrl(identifier);\n                          setTimeout(function () {\n                            return getFileSubscription.unsubscribe();\n                          }, 0);\n                          return [3\n                          /*break*/\n                          , 6];\n\n                        case 1:\n                          if (!preview) return [3\n                          /*break*/\n                          , 6];\n                          return [4\n                          /*yield*/\n                          , preview];\n\n                        case 2:\n                          value = _a.sent().value;\n                          if (!(value instanceof Blob)) return [3\n                          /*break*/\n                          , 4];\n                          return [4\n                          /*yield*/\n                          , fileToBase64(value)];\n\n                        case 3:\n                          imageUrl = _a.sent();\n                          this.setState({\n                            imageUrl: imageUrl\n                          });\n                          return [3\n                          /*break*/\n                          , 5];\n\n                        case 4:\n                          this.setState({\n                            imageUrl: value\n                          });\n                          _a.label = 5;\n\n                        case 5:\n                          setTimeout(function () {\n                            return getFileSubscription.unsubscribe();\n                          }, 0);\n                          _a.label = 6;\n\n                        case 6:\n                          return [2\n                          /*return*/\n                          ];\n                      }\n                    });\n                  });\n                },\n                error: function error(_error) {\n                  _this.onError(_error);\n                }\n              });\n              this.getFileSubscription = getFileSubscription;\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    _this.setRemoteImageUrl = function (identifier) {\n      return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var context, id, imageUrl;\n        return tslib_1.__generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              context = this.props.context;\n              return [4\n              /*yield*/\n              , identifier.id];\n\n            case 1:\n              id = _a.sent();\n              return [4\n              /*yield*/\n              , context.getImageUrl(id, {\n                collection: identifier.collectionName,\n                mode: 'full-fit'\n              })];\n\n            case 2:\n              imageUrl = _a.sent();\n              this.setState({\n                imageUrl: imageUrl\n              });\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    _this.copyFileToUserCollection = function (fileId) {\n      return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var _a, _b, _c, userAuthProvider, authProvider, file, collectionName, source, destination;\n\n        return tslib_1.__generator(this, function (_d) {\n          switch (_d.label) {\n            case 0:\n              _a = this.props, _b = _a.context, _c = _b.config, userAuthProvider = _c.userAuthProvider, authProvider = _c.authProvider, file = _b.file, collectionName = _a.identifier.collectionName;\n              if (!userAuthProvider) return [3\n              /*break*/\n              , 2];\n              source = {\n                id: fileId,\n                collection: collectionName,\n                authProvider: authProvider\n              };\n              destination = {\n                collection: 'recents',\n                authProvider: userAuthProvider,\n                occurrenceKey: uuidV4()\n              };\n              return [4\n              /*yield*/\n              , file.copyFile(source, destination)];\n\n            case 1:\n              _d.sent();\n\n              _d.label = 2;\n\n            case 2:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    _this.onSave = function (imageData, dimensions) {\n      var fileName = _this.fileName;\n      var _a = _this.props,\n          context = _a.context,\n          identifier = _a.identifier,\n          onUploadStart = _a.onUploadStart,\n          onFinish = _a.onFinish,\n          formatMessage = _a.intl.formatMessage;\n      var collectionName = identifier.collectionName;\n      var uploadableFile = {\n        content: imageData,\n        collection: collectionName,\n        name: convertFileNameToPng(fileName)\n      };\n      var id = uuidV4();\n      var occurrenceKey = uuidV4();\n      var touchedFiles = context.file.touchFiles([{\n        fileId: id,\n        collection: collectionName,\n        occurrenceKey: occurrenceKey\n      }], collectionName);\n      var deferredUploadId = touchedFiles.then(function (touchedFiles) {\n        return touchedFiles.created[0].uploadId;\n      });\n      var uploadableFileUpfrontIds = {\n        id: id,\n        deferredUploadId: deferredUploadId,\n        occurrenceKey: occurrenceKey\n      };\n      var uploadingFileState = context.file.upload(uploadableFile, undefined, uploadableFileUpfrontIds);\n      var uploadingFileStateSubscription = uploadingFileState.subscribe({\n        next: function next(fileState) {\n          if (fileState.status === 'processing') {\n            onFinish();\n\n            _this.copyFileToUserCollection(fileState.id);\n\n            setTimeout(function () {\n              return uploadingFileStateSubscription.unsubscribe();\n            }, 0);\n          } else if (fileState.status === 'failed-processing' || fileState.status === 'error') {\n            _this.onError(formatMessage(messages.could_not_save_image));\n\n            setTimeout(function () {\n              return uploadingFileStateSubscription.unsubscribe();\n            }, 0);\n          }\n        }\n      });\n      var newFileIdentifier = {\n        id: id,\n        collectionName: collectionName,\n        mediaItemType: 'file',\n        occurrenceKey: occurrenceKey\n      };\n      onUploadStart(newFileIdentifier, dimensions);\n    };\n\n    _this.onAnyEdit = function () {\n      var hasBeenEdited = _this.state.hasBeenEdited;\n\n      if (!hasBeenEdited) {\n        _this.setState({\n          hasBeenEdited: true\n        });\n      }\n    };\n\n    _this.closeConfirmationDialog = function () {\n      _this.setState({\n        closeIntent: false\n      });\n    };\n\n    _this.closeAnyway = function () {\n      var onFinish = _this.props.onFinish;\n      onFinish();\n\n      _this.closeConfirmationDialog();\n    };\n\n    _this.renderDeleteConfirmation = function () {\n      var formatMessage = _this.props.intl.formatMessage;\n      var closeIntent = _this.state.closeIntent;\n\n      if (closeIntent) {\n        var actions = [{\n          text: formatMessage(messages.annotate_confirmation_close_anyway),\n          onClick: _this.closeAnyway\n        }, {\n          text: formatMessage(messages.cancel),\n          onClick: _this.closeConfirmationDialog\n        }];\n        return React.createElement(ModalTransition, null, React.createElement(ModalDialog, {\n          width: \"small\",\n          appearance: \"danger\",\n          heading: formatMessage(messages.annotate_confirmation_heading),\n          actions: actions,\n          onClose: _this.closeConfirmationDialog\n        }, formatMessage(messages.annotate_confirmation_content)));\n      }\n\n      return null;\n    };\n\n    _this.onCancel = function () {\n      var hasBeenEdited = _this.state.hasBeenEdited;\n\n      if (hasBeenEdited) {\n        _this.setState({\n          closeIntent: true\n        });\n      } else {\n        var onFinish = _this.props.onFinish;\n        onFinish();\n      }\n    };\n\n    _this.onError = function (error) {\n      _this.setState({\n        hasError: true,\n        errorMessage: error\n      });\n    };\n\n    _this.clickShellNotPass = function (e) {\n      // Stop click from propagating back to the editor.\n      // Without it editor will get focus and apply all the key events\n      e.stopPropagation();\n    };\n\n    _this.renderLoading = function () {\n      return React.createElement(SpinnerWrapper, null, React.createElement(Spinner, {\n        size: \"large\",\n        invertColor: true\n      }));\n    };\n\n    _this.renderEditor = function (imageUrl) {\n      return React.createElement(EditorView, {\n        imageUrl: imageUrl,\n        onSave: _this.onSave,\n        onCancel: _this.onCancel,\n        onError: _this.onError,\n        onAnyEdit: _this.onAnyEdit\n      });\n    };\n\n    _this.renderError = function (error) {\n      var onFinish = _this.props.onFinish;\n\n      if (error instanceof Error) {\n        error = error.message;\n      }\n\n      return React.createElement(ErrorView, {\n        message: error,\n        onCancel: onFinish\n      });\n    };\n\n    return _this;\n  }\n\n  SmartMediaEditor.prototype.componentDidMount = function () {\n    var identifier = this.props.identifier;\n    this.getFile(identifier);\n  };\n\n  SmartMediaEditor.prototype.componentWillReceiveProps = function (nextProps) {\n    var _a = this.props,\n        identifier = _a.identifier,\n        context = _a.context;\n\n    if (nextProps.identifier.id !== identifier.id || nextProps.context !== context) {\n      this.getFile(nextProps.identifier);\n    }\n  };\n\n  SmartMediaEditor.prototype.componentWillUnmount = function () {\n    var _a = this,\n        getFileSubscription = _a.getFileSubscription,\n        uploadFileSubscription = _a.uploadFileSubscription;\n\n    if (getFileSubscription) {\n      getFileSubscription.unsubscribe();\n    }\n\n    if (uploadFileSubscription) {\n      uploadFileSubscription.unsubscribe();\n    }\n  };\n\n  SmartMediaEditor.prototype.render = function () {\n    var _a = this.state,\n        imageUrl = _a.imageUrl,\n        hasError = _a.hasError,\n        errorMessage = _a.errorMessage;\n    var content = hasError ? this.renderError(errorMessage) : imageUrl ? this.renderEditor(imageUrl) : this.renderLoading();\n    return React.createElement(Blanket, {\n      onClick: this.clickShellNotPass\n    }, this.renderDeleteConfirmation(), React.createElement(Shortcut, {\n      keyCode: 27,\n      handler: this.onCancel\n    }), content);\n  };\n\n  SmartMediaEditor.contextTypes = {\n    intl: intlShape\n  };\n  return SmartMediaEditor;\n}(React.Component);\n\nexport { SmartMediaEditor };\n\nvar default_1 =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(default_1, _super);\n\n  function default_1() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  default_1.prototype.render = function () {\n    var Component = injectIntl(SmartMediaEditor);\n    var content = React.createElement(Component, tslib_1.__assign({}, this.props));\n    return this.context.intl ? content : React.createElement(IntlProvider, {\n      locale: \"en\"\n    }, content);\n  };\n\n  return default_1;\n}(React.Component);\n\nexport default default_1;","import { defineMessages } from 'react-intl';\nexport var messages = defineMessages({\n  retry: {\n    id: 'fabric.media.retry',\n    defaultMessage: 'Retry',\n    description: 'Allows user to perform an action again'\n  },\n  failed_to_load: {\n    id: 'fabric.media.failed_to_load',\n    defaultMessage: 'Failed to load',\n    description: 'We show this message when we have an error loading a file'\n  },\n  recent_uploads: {\n    id: 'fabric.media.recent_uploads',\n    defaultMessage: 'Recent uploads',\n    description: 'Title of a section where we show the user recent uploaded files'\n  },\n  upload_file: {\n    id: 'fabric.media.upload_file',\n    defaultMessage: 'Upload a file',\n    description: 'Call to action that initiates the upload of a file'\n  },\n  drag_and_drop_your_files: {\n    id: 'fabric.media.drag_and_drop_your_files',\n    defaultMessage: 'Drag and drop your files anywhere or',\n    description: 'Used to describe the area where the user can drag and drop files to upload'\n  },\n  drop_your_files: {\n    id: 'fabric.media.drop_your_files',\n    defaultMessage: 'Drop your files to upload',\n    description: 'Indicates that the files will be uploaded when the user drops them in the drag and drop area'\n  },\n  upload: {\n    id: 'fabric.media.upload',\n    defaultMessage: 'Upload',\n    description: 'upload'\n  },\n  cancel: {\n    id: 'fabric.media.cancel',\n    defaultMessage: 'Cancel',\n    description: 'cancel'\n  },\n  search_all_gifs: {\n    id: 'fabric.media.search_all_gifs',\n    defaultMessage: 'Search all the GIFs!',\n    description: 'Used as input placeholder to let the user know that they can search for GIF image files'\n  },\n  cant_retrieve_gifs: {\n    id: 'fabric.media.cant_retrieve_gifs',\n    defaultMessage: 'Ouch! We could not retrieve any GIFs',\n    description: 'Error message when we can not find any GIF images for that text'\n  },\n  check_your_network: {\n    id: 'fabric.media.check_your_network',\n    defaultMessage: 'Check your network connection',\n    description: 'Error message when network does not work'\n  },\n  try_again: {\n    id: 'fabric.media.try_again',\n    defaultMessage: 'Try again',\n    description: 'Allow the user to try an action again'\n  },\n  no_gifs_found: {\n    id: 'fabric.media.no_gifs_found',\n    defaultMessage: \"Hello? Was it me you're looking for?\",\n    description: 'Not expected error that happens when searching for GIF images'\n  },\n  no_gifs_found_suggestion: {\n    id: 'fabric.media.no_gifs_found_suggestion',\n    defaultMessage: 'We couldn\\'t find anything for \"{query}\"',\n    description: 'There are no results for GIFs matching that query'\n  },\n  load_more_gifs: {\n    id: 'fabric.media.load_more_gifs',\n    defaultMessage: 'Load more GIFs',\n    description: 'Used to load next page of GIF images'\n  },\n  add_account: {\n    id: 'fabric.media.add_account',\n    defaultMessage: 'Add account',\n    description: 'Allows to add a new account'\n  },\n  unlink_account: {\n    id: 'fabric.media.unlink_account',\n    defaultMessage: 'Unlink Account',\n    description: 'Allows to remove a connected account from the user'\n  },\n  upload_file_from: {\n    id: 'fabric.media.upload_file_from',\n    defaultMessage: 'Upload a file from {name}',\n    description: 'Allows to upload a file from different sources'\n  },\n  connect_to: {\n    id: 'fabric.media.connect_to',\n    defaultMessage: 'Connect to {name}',\n    description: 'Allows the user to connect with different types of external services'\n  },\n  connect_account_description: {\n    id: 'fabric.media.connect_account_description',\n    defaultMessage: \"We'll open a new page to help you connect your {name} account\",\n    description: 'Explains what will happen when the users connects to a new account'\n  },\n  upload_an_avatar: {\n    id: 'fabric.media.upload_an_avatar',\n    defaultMessage: 'Upload an avatar',\n    description: 'Indicates that the user can upload a new avatar'\n  },\n  save: {\n    id: 'fabric.media.save',\n    defaultMessage: 'Save',\n    description: 'Just the \"save\" word'\n  },\n  or: {\n    id: 'fabric.media.or',\n    defaultMessage: 'or',\n    description: 'Just the \"or\" word'\n  },\n  upload_photo: {\n    id: 'fabric.media.upload_photo',\n    defaultMessage: 'Upload a photo',\n    description: 'Call to action for the user to upload a new photo'\n  },\n  default_avatars: {\n    id: 'fabric.media.default_avatars',\n    defaultMessage: 'Default avatars',\n    description: 'Showed above the default avatar list'\n  },\n  drag_and_drop_images_here: {\n    id: 'fabric.media.drag_and_drop_images_here',\n    defaultMessage: 'Drag and drop your images here',\n    description: 'Indicates that the user can drag and drop images in that area'\n  },\n  upload_image: {\n    id: 'fabric.media.upload_image',\n    defaultMessage: 'Upload image',\n    description: 'Call to action for the user to upload a new image'\n  },\n  image_url_invalid_error: {\n    id: 'fabric.media.image_url_invalid_error',\n    defaultMessage: 'Could not load image, the url is invalid.',\n    description: 'There was an error parsing the image url'\n  },\n  image_format_invalid_error: {\n    id: 'fabric.media.image_format_invalid_error',\n    defaultMessage: 'Could not load image, the format is invalid.',\n    description: 'The provided image format is not valid'\n  },\n  image_size_too_large_error: {\n    id: 'fabric.media.image_size_too_large_error',\n    defaultMessage: 'Image is too large, must be no larger than {MAX_SIZE_MB}Mb',\n    description: 'The provided image size is too big'\n  },\n  something_went_wrong: {\n    id: 'fabric.media.something_went_wrong',\n    defaultMessage: 'Something went wrong.',\n    description: 'Showed when an error happen but we dont have more info about it'\n  },\n  might_be_a_hiccup: {\n    id: 'fabric.media.might_be_a_hiccup',\n    defaultMessage: 'It might just be a hiccup.',\n    description: 'Used when an unknow error happens, just in a funny way of saying that we dont have more info about it'\n  },\n  couldnt_generate_preview: {\n    id: 'fabric.media.couldnt_generate_preview',\n    defaultMessage: \"We couldn't generate a preview for this file.\",\n    description: 'Error case for when the backend cant generate a preview for that file'\n  },\n  cant_preview_file_type: {\n    id: 'fabric.media.cant_preview_file_type',\n    defaultMessage: \"We can't preview this file type.\",\n    description: 'Error case for when we have no available preview for that file'\n  },\n  item_not_found_in_list: {\n    id: 'fabric.media.item_not_found_in_list',\n    defaultMessage: 'The selected item was not found on the list.',\n    description: 'Error case for when a provided item is not found within the list of items'\n  },\n  no_pdf_artifacts: {\n    id: 'fabric.media.no_pdf_artifacts',\n    defaultMessage: 'No PDF artifacts found for this file.',\n    description: 'Error case for when we cant preview a PDF file'\n  },\n  give_feedback: {\n    id: 'fabric.media.give_feedback',\n    defaultMessage: 'Give feedback',\n    description: 'Call to action that opens a popup to get feedback from the users'\n  },\n  try_downloading_file: {\n    id: 'fabric.media.try_downloading_file',\n    defaultMessage: 'Try downloading the file to view it.',\n    description: 'We show this message to allow users to download a file'\n  },\n  webgl_warning_description: {\n    id: 'fabric.media.webgl_warning_description',\n    defaultMessage: 'Your browser does not support WebGL. Use a WebGL enabled browser to annotate images.',\n    description: 'We show this error message when the browser doesnt support this feature'\n  },\n  unable_to_annotate_image: {\n    id: 'fabric.media.unable_to_annotate_image',\n    defaultMessage: \"You're unable to annotate this image\",\n    description: 'If there is an error trying to annotate an image we show this'\n  },\n  learn_more: {\n    id: 'fabric.media.learn_more',\n    defaultMessage: 'Learn More',\n    description: ''\n  },\n  accounts: {\n    id: 'fabric.media.accounts',\n    defaultMessage: 'Accounts',\n    description: ''\n  },\n  actions: {\n    id: 'fabric.media.actions',\n    defaultMessage: 'Actions',\n    description: ''\n  },\n  error_hint_retry: {\n    id: 'fabric.media.error_hint_retry',\n    defaultMessage: \"Try again and we'll give it another shot.\",\n    description: 'Generic message that we show if an action failed'\n  },\n  error_hint_critical: {\n    id: 'fabric.media.error_hint_critical',\n    defaultMessage: 'If the problem keeps happening contact support.',\n    description: 'We show this error message if we cant recover from the action'\n  },\n  close: {\n    id: 'fabric.media.close',\n    defaultMessage: 'Close',\n    description: ''\n  },\n  could_not_load_editor: {\n    id: 'fabric.media.could_not_load_editor',\n    defaultMessage: 'Ouch! We could not load the editor',\n    description: 'Error message to communicate that we cant load the editor'\n  },\n  could_not_save_image: {\n    id: 'fabric.media.could_not_save_image',\n    defaultMessage: 'Ouch! We could not save the image',\n    description: 'Error message to communicate that we cant save an image'\n  },\n  annotate: {\n    id: 'fabric.media.annotate',\n    defaultMessage: 'Annotate',\n    description: ''\n  },\n  annotate_tool_arrow: {\n    id: 'fabric.media.annotate.tool.arrow',\n    defaultMessage: 'Arrow',\n    description: ''\n  },\n  annotate_tool_text: {\n    id: 'fabric.media.annotate.tool.text',\n    defaultMessage: 'Text',\n    description: ''\n  },\n  annotate_tool_shape: {\n    id: 'fabric.media.annotate.tool.shape',\n    defaultMessage: 'Shape',\n    description: ''\n  },\n  annotate_tool_brush: {\n    id: 'fabric.media.annotate.tool.brush',\n    defaultMessage: 'Brush',\n    description: ''\n  },\n  annotate_tool_blur: {\n    id: 'fabric.media.annotate.tool.blur',\n    defaultMessage: 'Blur',\n    description: ''\n  },\n  annotate_tool_line_thickness: {\n    id: 'fabric.media.annotate.tool.line.thickness',\n    defaultMessage: 'Line thickness',\n    description: ''\n  },\n  annotate_tool_color: {\n    id: 'fabric.media.annotate.tool.color',\n    defaultMessage: 'Color',\n    description: ''\n  },\n  annotate_confirmation_close_anyway: {\n    id: 'fabric.media.annotate.confirmation.close.anyway',\n    defaultMessage: 'Close anyway',\n    description: ''\n  },\n  annotate_confirmation_heading: {\n    id: 'fabric.media.annotate.confirmation.heading',\n    defaultMessage: 'Unsaved changes',\n    description: ''\n  },\n  annotate_confirmation_content: {\n    id: 'fabric.media.annotate.confirmation.content',\n    defaultMessage: 'You have some unsaved changes. Are you sure you want to leave?',\n    description: ''\n  },\n  drop_your_files_here: {\n    id: 'fabric.media.drop_your_files_here',\n    defaultMessage: 'Drop your files here',\n    description: 'Info message that we show to indicate that the user can drag and drop files'\n  },\n  share_files_instantly: {\n    id: 'fabric.media.share_files_instantly',\n    defaultMessage: \"We'll share them instantly\",\n    description: 'It means that we will upload the files you drag and drop automatically'\n  },\n  insert_files: {\n    id: 'fabric.media.insert_files',\n    defaultMessage: 'Insert {0, plural, one {a file} other {{0} files}}',\n    description: 'Showed when the user selects 1 or more files to insert'\n  },\n  zoom_out: {\n    id: 'fabric.media.zoom_out',\n    defaultMessage: 'zoom out',\n    description: 'Indicates the user can zoom out a file'\n  },\n  zoom_in: {\n    id: 'fabric.media.zoom_in',\n    defaultMessage: 'zoom in',\n    description: 'Indicates the user can zoom in a file'\n  },\n  remove_image: {\n    id: 'fabric.media.remove_image',\n    defaultMessage: 'Remove image',\n    description: 'Allows the user to remove a file'\n  },\n  play: {\n    id: 'fabric.media.play',\n    defaultMessage: 'play',\n    description: ''\n  },\n  pause: {\n    id: 'fabric.media.pause',\n    defaultMessage: 'pause',\n    description: ''\n  },\n  disable_fullscreen: {\n    id: 'fabric.media.disable_fullscreen',\n    defaultMessage: 'disable fullscreen',\n    description: 'Hint to let the user know they can disable the fullscreen mode'\n  },\n  enable_fullscreen: {\n    id: 'fabric.media.enable_fullscreen',\n    defaultMessage: 'enable fullscreen',\n    description: 'Hint to let the user know they can enable the fullscreen mode'\n  },\n  error_loading_file: {\n    id: 'fabric.media.error_loading_file',\n    defaultMessage: 'Error loading file',\n    description: 'Message showed when we had an error trying to load the file'\n  },\n  error_generating_preview: {\n    id: 'fabric.media.error_generating_preview',\n    defaultMessage: 'Error generating preview',\n    description: 'Message showed when we had an error trying generate a preview for a file'\n  },\n  download: {\n    id: 'fabric.media.download',\n    defaultMessage: 'Download',\n    description: ''\n  },\n  unknown: {\n    id: 'fabric.media.unknown',\n    defaultMessage: 'unknown',\n    description: ''\n  },\n  document: {\n    id: 'fabric.media.document',\n    defaultMessage: 'document',\n    description: ''\n  },\n  audio: {\n    id: 'fabric.media.audio',\n    defaultMessage: 'audio',\n    description: ''\n  },\n  video: {\n    id: 'fabric.media.video',\n    defaultMessage: 'video',\n    description: ''\n  },\n  image: {\n    id: 'fabric.media.image',\n    defaultMessage: 'image',\n    description: ''\n  }\n});","import * as tslib_1 from \"tslib\";\nimport { Component } from 'react';\nexport var keyCodes = {\n  space: 32,\n  m: 77\n};\n\nvar Shortcut =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Shortcut, _super);\n\n  function Shortcut() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.keyHandler = function (e) {\n      var _a = _this.props,\n          keyCode = _a.keyCode,\n          handler = _a.handler;\n\n      if (e.keyCode === keyCode) {\n        handler();\n      }\n    };\n\n    _this.init = function () {\n      document.addEventListener('keydown', _this.keyHandler);\n    };\n\n    _this.release = function () {\n      document.removeEventListener('keydown', _this.keyHandler);\n    };\n\n    return _this;\n  }\n\n  Shortcut.prototype.componentDidMount = function () {\n    this.init();\n  };\n\n  Shortcut.prototype.componentWillUnmount = function () {\n    this.release();\n  };\n\n  Shortcut.prototype.render = function () {\n    return null;\n  };\n\n  return Shortcut;\n}(Component);\n\nexport { Shortcut };"],"sourceRoot":""}