(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{569:function(e,t){},683:function(e,t,n){e.exports=n(945)},760:function(e,t){},766:function(e,t){},945:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(50),i=n.n(o),c=n(205),l=n(206),u=n(217),s=n(207),m=n(218),f=n(1042),p=n(225),d=n(1041),h=n(131),v=n.n(h),g=n(410),b=n(554),E=n(1032),w=n(208),j=n(550),O=n.n(j),y=n(56),C=n.n(y),x=function(e,t,n){var a=[];Object.keys(e).forEach(function(r){var o=Number(r),i=e[o];if(!isNaN(o))if(t)a.push(i);else{var c=new FileReader;c.readAsDataURL(i),c.onload=function(){n&&n([i])}}}),t&&n&&n(a)},k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).fileRef=a.createRef(),n.fileOnChange=function(e){var t=n.props,a=t.multiple,r=t.onChange,o=e.target.files,i=o[0];o.length&&(x(o,a,r),n.setState({file:i}))},n.state={file:null},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.multiple,n=e.disabled,r=e.isHide;return a.createElement("div",{className:"jsx-2833243397 "+(C()({"is-hide":r})||"")},a.createElement(O.a,{id:"2833243397"},["div.is-hide.jsx-2833243397{display:none;}"]),a.createElement("input",{type:"file",ref:this.fileRef,onChange:this.fileOnChange,multiple:t,disabled:n,className:"jsx-2833243397"}))}}]),t}(a.Component),U=n(551);function R(){var e=Object(U.a)(["\n  white-space: pre-wrap;\n\n  &:empty:not(:focus)::before {\n    content: attr(data-placeholder);\n    font-size: 14px;\n  }\n"]);return R=function(){return e},e}var I=n(3).default.div(R()),S=function(e){var t=e.width,n=e.height,r=e.d;return a.createElement("svg",{width:t,height:n,viewBox:"0 0 ".concat(t," ").concat(n),focusable:"false",role:"presentation"},a.createElement("path",{d:r,fill:"currentColor",fillRule:"evenodd"}))},N=function(e){var t,n=e.content,r=e.elemBefore,o=e.onClick;return{content:n,value:{name:(t=n,t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,""))},tooltipDescription:n,tooltipPosition:"right",elemBefore:r||a.createElement(S,{width:"24",height:"24",d:"M10.208 7.308a1.09 1.09 0 0 1 0 1.483l-3.515 3.71 3.515 3.708a1.09 1.09 0 0 1 0 1.483.957.957 0 0 1-1.405 0l-3.866-4.08a1.635 1.635 0 0 1 0-2.225l3.866-4.08a.957.957 0 0 1 1.405 0zm3.584 0a.957.957 0 0 1 1.405 0l3.866 4.08c.583.614.583 1.61 0 2.225l-3.866 4.08a.957.957 0 0 1-1.405 0 1.09 1.09 0 0 1 0-1.484l3.515-3.708-3.515-3.71a1.09 1.09 0 0 1 0-1.483z"}),onClick:o}},B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).fileInputRef=a.createRef(),n.imageUploadRef=a.createRef(),n.transformer=void 0,n.recursiveFileUploadQueue=function(e){var t=n.state.filesName;n.setState({filesName:[].concat(Object(p.a)(t),Object(p.a)(e.map(function(e){return e.name})))})},n.recursiveImageUploadQueue=function(e,t){return e.forEach(function(){var e=Object(g.a)(v.a.mark(function e(n){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.URL.createObjectURL(n);case 2:a=e.sent,t.replaceSelection({type:"mediaSingle",attrs:{layout:"center"},content:[{type:"media",attrs:{type:"external",url:a}}]});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},n.transformer=new w.a,n.state={isShowEditorValue:!1,jsonDocument:"{}",filesName:[],selectedTempDataList:[]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.renderEditor,r=t.isImageUpload,o=this.state,i=o.isShowEditorValue,c=o.filesName,l=o.selectedTempDataList;return a.createElement(b.a,null,a.createElement(a.Fragment,null,a.createElement("button",{onClick:function(){e.setState({isShowEditorValue:!i})}},"Show/Hide JSON Data"),a.createElement(k,{ref:this.fileInputRef,onChange:this.recursiveFileUploadQueue,multiple:!0,isHide:!0}),a.createElement(E.a,{render:function(t){return a.createElement(a.Fragment,null,a.createElement("button",{onClick:Object(g.a)(v.a.mark(function n(){var a,r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.props.getValue,n.next=3,t.getValue();case 3:r=n.sent,a(r);case 5:case"end":return n.stop()}},n)}))},"Save"),r&&a.createElement(k,{ref:e.imageUploadRef,onChange:function(n){return e.recursiveImageUploadQueue(n,t)},multiple:!0,isHide:!0}))}}),n({onChange:function(t){var n,a=(n=e.transformer.encode(t.state.doc),JSON.stringify(n,null,2));e.setState({jsonDocument:a})},legacyImageUploadProvider:r&&Promise.resolve(function(){return e.imageUploadRef.current.fileRef.current.click()}),fileUploadMenuItem:N({content:"File Upload",onClick:function(){return e.fileInputRef.current.fileRef.current.click()}}),customButton:this.props.customButton.map(function(e){return N({content:e.name,onClick:e.onClick})})}),l&&a.createElement("ul",null,l.map(function(e){return a.createElement("li",null,e)})),i&&a.createElement(I,null,this.state.jsonDocument),!!c.length&&a.createElement("ul",null,c.map(function(e){return a.createElement("li",null,e)}))))}}]),t}(a.Component),V=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,D=/(?:vimeo)\.com.*(?:videos|video|channels|)\/([\d]+)/i,F={movie:N({content:"Movie extension",onClick:function(e){var t=prompt("Input Url")||"",n=t.match(V),a=t.match(D),r={};if(n&&11===n[2].length)r.type="youtube",r.url=n;else{if(!a||!t[1])return null;r.type="vimeo",r.url=a}e.replaceSelection({type:"extension",attrs:{extensionType:"com.haniplanet.macro.core",extensionKey:"movie",text:"Movie extension",parameters:r}})}})},H=function(e){return e.map(function(e){return F[e]})},L={"com.haniplanet.macro.core":function(e,t){var n=e.extensionKey,r=e.parameters;switch(n){case"movie":var o=r.type,i=r.url,c={};if("youtube"===o)c.id=i[2],c.src="//www.youtube.com/embed/";else{if("vimeo"!==o)return null;c.id=i[1],c.src="//player.vimeo.com/video/"}return a.createElement("div",null,a.createElement("iframe",{title:"movie-".concat(c.id),width:"560",height:"315",src:c.src+c.id}));default:return null}}},M=[{name:"Custom Button 1",onClick:function(){return console.log("OK")}},{name:"Custom Button 2",onClick:function(){return console.log("OK2")}}],P=function(e){return a.createElement(B,Object.assign({isImageUpload:!0,customButton:M,renderEditor:function(e){var t=e.onChange,n=e.legacyImageUploadProvider,r=e.fileUploadMenuItem,o=e.customButton;return a.createElement(d.a,{appearance:"comment",extensionHandlers:L,insertMenuItems:[].concat(Object(p.a)(H(["movie"])),[r],Object(p.a)(o)),onChange:t,legacyImageUploadProvider:n,allowExtension:!0})}},e))},J=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={editorValue:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement(P,{getValue:function(t){return e.setState({editorValue:t})}}),a.createElement(f.a,{document:this.state.editorValue,extensionHandlers:L}))}}]),t}(a.Component);n(847),n(522);i.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[683,182,183]]]);
//# sourceMappingURL=main.8d7f8185.chunk.js.map