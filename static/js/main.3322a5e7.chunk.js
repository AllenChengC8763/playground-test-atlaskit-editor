(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{493:function(e,t){},606:function(e,t,n){e.exports=n(770)},683:function(e,t){},689:function(e,t){},770:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(47),o=n.n(i),c=n(182),l=n(183),u=n(194),s=n(184),m=n(195),f=n(867),p=n(202),d=n(866),h=n(117),v=n.n(h),g=n(359),b=n(478),w=n(857),E=n(185),j=n(474),y=n.n(j),O=n(53),C=n.n(O),x=function(e,t,n){var a=[];Object.keys(e).forEach(function(r){var i=Number(r),o=e[i];if(!isNaN(i))if(t)a.push(o);else{var c=new FileReader;c.readAsDataURL(o),c.onload=function(){n&&n([o])}}}),t&&n&&n(a)},S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).fileRef=a.createRef(),n.fileOnChange=function(e){var t=n.props,a=t.multiple,r=t.onChange,i=e.target.files,o=i[0];i.length&&(x(i,a,r),n.setState({file:o}))},n.state={file:null},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.multiple,n=e.disabled,r=e.isHide;return a.createElement("div",{className:"jsx-2833243397 "+(C()({"is-hide":r})||"")},a.createElement(y.a,{id:"2833243397"},["div.is-hide.jsx-2833243397{display:none;}"]),a.createElement("input",{type:"file",ref:this.fileRef,onChange:this.fileOnChange,multiple:t,disabled:n,className:"jsx-2833243397"}))}}]),t}(a.Component),I=n(475);function U(){var e=Object(I.a)(["\n  white-space: pre-wrap;\n\n  &:empty:not(:focus)::before {\n    content: attr(data-placeholder);\n    font-size: 14px;\n  }\n"]);return U=function(){return e},e}var k=n(3).default.div(U()),R=function(e){var t=e.width,n=e.height,r=e.d;return a.createElement("svg",{width:t,height:n,viewBox:"0 0 ".concat(t," ").concat(n),focusable:"false",role:"presentation"},a.createElement("path",{d:r,fill:"currentColor",fillRule:"evenodd"}))},D=function(e){var t,n=e.content,r=e.elemBefore,i=e.onClick;return{content:n,value:{name:(t=n,t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,""))},tooltipDescription:n,tooltipPosition:"right",elemBefore:r||a.createElement(R,{width:"24",height:"24",d:"M10.208 7.308a1.09 1.09 0 0 1 0 1.483l-3.515 3.71 3.515 3.708a1.09 1.09 0 0 1 0 1.483.957.957 0 0 1-1.405 0l-3.866-4.08a1.635 1.635 0 0 1 0-2.225l3.866-4.08a.957.957 0 0 1 1.405 0zm3.584 0a.957.957 0 0 1 1.405 0l3.866 4.08c.583.614.583 1.61 0 2.225l-3.866 4.08a.957.957 0 0 1-1.405 0 1.09 1.09 0 0 1 0-1.484l3.515-3.708-3.515-3.71a1.09 1.09 0 0 1 0-1.483z"}),onClick:i}},L=["Item 1","Item 2","Item 3","Item 4","Item 5"],N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).fileInputRef=a.createRef(),n.imageUploadRef=a.createRef(),n.transformer=void 0,n.recursiveFileUploadQueue=function(e){var t=n.state.filesName;n.setState({filesName:[].concat(Object(p.a)(t),Object(p.a)(e.map(function(e){return e.name})))})},n.recursiveImageUploadQueue=function(e,t){return e.forEach(function(){var e=Object(g.a)(v.a.mark(function e(n){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.URL.createObjectURL(n);case 2:a=e.sent,t.replaceSelection({type:"mediaSingle",attrs:{layout:"center"},content:[{type:"media",attrs:{type:"external",url:a}}]});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},n.transformer=new E.a,n.state={isShowEditorValue:!1,jsonDocument:"{}",filesName:[],isShowTempDataList:!1,selectedTempDataList:[]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.renderEditor,r=t.isImageUpload,i=this.state,o=i.isShowEditorValue,c=i.filesName,l=i.isShowTempDataList,u=i.selectedTempDataList;return a.createElement(b.a,null,a.createElement(a.Fragment,null,a.createElement("button",{onClick:function(){e.setState({isShowEditorValue:!o})}},"Show/Hide JSON Data"),a.createElement(S,{ref:this.fileInputRef,onChange:this.recursiveFileUploadQueue,multiple:!0,isHide:!0}),a.createElement(w.a,{render:function(t){return a.createElement(a.Fragment,null,a.createElement("button",{onClick:Object(g.a)(v.a.mark(function n(){var a,r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.props.getValue,n.next=3,t.getValue();case 3:r=n.sent,a(r);case 5:case"end":return n.stop()}},n)}))},"Save"),r&&a.createElement(S,{ref:e.imageUploadRef,onChange:function(n){return e.recursiveImageUploadQueue(n,t)},multiple:!0,isHide:!0}))}}),n({onChange:function(t){var n,a=(n=e.transformer.encode(t.state.doc),JSON.stringify(n,null,2));e.setState({jsonDocument:a})},legacyImageUploadProvider:r&&Promise.resolve(function(){return e.imageUploadRef.current.fileRef.current.click()}),fileUploadMenuItem:D({content:"File Upload",onClick:function(){return e.fileInputRef.current.fileRef.current.click()}}),testButtom:D({content:"Test Button",onClick:function(){e.setState({isShowTempDataList:!0})}})}),l&&a.createElement("ul",null,L.map(function(t){return a.createElement("li",{onClick:function(){e.setState({isShowTempDataList:!1,selectedTempDataList:[].concat(Object(p.a)(u),[t])})}},a.createElement("a",{href:"#"},t))})),u&&a.createElement("ul",null,u.map(function(e){return a.createElement("li",null,e)})),o&&a.createElement(k,null,this.state.jsonDocument),!!c.length&&a.createElement("ul",null,c.map(function(e){return a.createElement("li",null,e)}))))}}]),t}(a.Component),T=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,V=/(?:vimeo)\.com.*(?:videos|video|channels|)\/([\d]+)/i,B={movie:D({content:"Movie extension",onClick:function(e){var t=prompt("Input Url")||"",n=t.match(T),a=t.match(V),r={};if(n&&11===n[2].length)r.type="youtube",r.url=n;else{if(!a||!t[1])return null;r.type="vimeo",r.url=a}e.replaceSelection({type:"extension",attrs:{extensionType:"com.haniplanet.macro.core",extensionKey:"movie",text:"Movie extension",parameters:r}})}})},F=function(e){return e.map(function(e){return B[e]})},H={"com.haniplanet.macro.core":function(e,t){var n=e.extensionKey,r=e.parameters;switch(n){case"movie":var i=r.type,o=r.url,c={};if("youtube"===i)c.id=o[2],c.src="//www.youtube.com/embed/";else{if("vimeo"!==i)return null;c.id=o[1],c.src="//player.vimeo.com/video/"}return a.createElement("div",null,a.createElement("iframe",{title:"movie-".concat(c.id),width:"560",height:"315",src:c.src+c.id}));default:return null}}},M=function(e){return a.createElement(N,Object.assign({isImageUpload:!0,renderEditor:function(e){var t=e.onChange,n=e.legacyImageUploadProvider,r=e.fileUploadMenuItem,i=e.testButtom;return a.createElement(d.a,{appearance:"comment",extensionHandlers:H,insertMenuItems:[].concat(Object(p.a)(F(["movie"])),[r,i]),onChange:t,legacyImageUploadProvider:n,allowExtension:!0})}},e))},P=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={editorValue:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement(M,{getValue:function(t){return e.setState({editorValue:t})}}),a.createElement(f.a,{document:this.state.editorValue,extensionHandlers:H}))}}]),t}(a.Component);o.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[606,182,183]]]);
//# sourceMappingURL=main.3322a5e7.chunk.js.map