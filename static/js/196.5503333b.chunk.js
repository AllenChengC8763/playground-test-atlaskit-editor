(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{1419:function(e,t,a){"use strict";a.r(t);var n,i,o,r,s=a(1),d=a(0),l=a(551),c=a.n(l),u=a(12),f=a(553),p=a(558),m=a(1066),g=a(1411),h=a(791),_=a(1250),b=a(990),w=a(891),y=a(3),v=a(2),M=a(790),E=y.default.div(n||(n=s.__makeTemplateObject(["\n  width: 290px;\n  padding: 16px;\n  background-color: ",";\n  border-radius: 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"],["\n  width: 290px;\n  padding: 16px;\n  background-color: ",";\n  border-radius: 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"])),v.colors.N0),x=y.default.div(i||(i=s.__makeTemplateObject(["\n  width: 92px;\n"],["\n  width: 92px;\n"]))),k=y.default.div(o||(o=s.__makeTemplateObject(["\n  color: ",";\n  margin-top: 16px;\n  margin-bottom: 4px;\n  width: 256px;\n  text-align: center;\n  font-weight: bold;\n"],["\n  color: ",";\n  margin-top: 16px;\n  margin-bottom: 4px;\n  width: 256px;\n  text-align: center;\n  font-weight: bold;\n"])),v.colors.N900),C=y.default.div(r||(r=s.__makeTemplateObject(["\n  color: ",";\n  margin-top: 4px;\n  margin-bottom: 20px;\n  width: 256px;\n  text-align: center;\n"],["\n  color: ",";\n  margin-top: 4px;\n  margin-bottom: 20px;\n  width: 256px;\n  text-align: center;\n"])),v.colors.N70),A=function(e){return d.createElement(M.a,s.__assign({},e,{theme:function(e,t){var a=e(t),n=a.buttonStyles,i=s.__rest(a,["buttonStyles"]);return s.__assign({buttonStyles:s.__assign({},n,{display:"inline-flex",width:"84px",margin:"2px",justifyContent:"center"})},i)}}))},I=d.createElement("svg",{viewBox:"0 0 163.28 218"},d.createElement("defs",null,d.createElement("style",null,"\n.cls-1{fill:url(#linear-gradient);}\n.cls-2{fill:#253858;}\n.cls-3{fill:#ffc400;}\n.cls-4{fill:#ffab00;}\n.cls-5,.cls-6{fill:none;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;}\n.cls-5{stroke:#344563;}\n.cls-6{stroke:#5e6c84;}\n"),d.createElement("linearGradient",{id:"linear-gradient",x1:"133.86",y1:"136.43",x2:"-2.79",y2:"200.15",gradientUnits:"userSpaceOnUse"},d.createElement("stop",{offset:"0",stopColor:"#ffd740"}),d.createElement("stop",{offset:"1",stopColor:"#ffab00"})),d.createElement("clipPath",null,d.createElement("path",{className:"cls-1",d:"M94.78,80.16l66.44,115.08A15.17,15.17,0,0,1,148.08,218H15.2A15.17,15.17,0,0,1,2.06,195.24L68.5,80.16A15.17,15.17,0,0,1,94.78,80.16Z"}))),d.createElement("g",null,d.createElement("g",null,d.createElement("path",{className:"cls-1",d:"M94.78,80.16l66.44,115.08A15.17,15.17,0,0,1,148.08,218H15.2A15.17,15.17,0,0,1,2.06,195.24L68.5,80.16A15.17,15.17,0,0,1,94.78,80.16Z"}),d.createElement("path",{className:"cls-2",d:"M87.22,163.71l2.88-44.35a9.18,9.18,0,0,0-9.16-9.78h0a9.18,9.18,0,0,0-9.16,9.78l2.88,44.35a6.3,6.3,0,0,0,6.28,5.89h0A6.3,6.3,0,0,0,87.22,163.71Z"}),d.createElement("path",{className:"cls-2",d:"M71.38,187.25a9.53,9.53,0,0,0,10.39,9.58,9.68,9.68,0,0,0-.9-19.32A9.64,9.64,0,0,0,71.38,187.25Z"}),d.createElement("path",{className:"cls-3",d:"M91.7,27.17,84.29.45A.61.61,0,0,0,83.1.5L78.44,25.6l-5.8-1.08a.61.61,0,0,0-.7.76L79.35,52A.61.61,0,0,0,80.54,52l4.66-25.1L91,27.93A.61.61,0,0,0,91.7,27.17Z"}),d.createElement("path",{className:"cls-4",d:"M65.12,41.81,54.24,33.26a.27.27,0,0,0-.41.33L59.36,45,56.7,46.31a.27.27,0,0,0,0,.45l10.87,8.55a.27.27,0,0,0,.41-.33L62.41,43.55l2.66-1.29A.27.27,0,0,0,65.12,41.81Z"}),d.createElement("path",{className:"cls-5",d:"M115.15,36.6c-1.17,1.59-11-5.6-12.16-4s8.66,8.79,7.5,10.39-11-5.6-12.17-4,8.66,8.79,7.49,10.39-11-5.6-12.17-4,8.66,8.79,7.49,10.39"}),d.createElement("path",{className:"cls-6",d:"M119.92,64.19c-1.46,1.33-7.05-4.78-8.51-3.44s4.13,7.45,2.67,8.78-7.05-4.78-8.51-3.44c-.68.62.16,2.27,1.11,4"}),d.createElement("path",{className:"cls-6",d:"M44.8,64c1.82.77,5-6.87,6.86-6.1s-1.39,8.4.43,9.17,5-6.87,6.86-6.1c.85.36.61,2.19.29,4.13"})))),S=a(991),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.render=function(){return d.createElement(S.a,null,d.createElement(E,null,d.createElement(x,null,I),d.createElement(k,null,this.props.message),d.createElement(C,null,this.renderHint()),this.renderTryAgainButton(),this.renderCancelButton()))},t.prototype.renderHint=function(){var e=this.props,t=e.onRetry,a=e.intl.formatMessage;return t?d.createElement("span",null,a(f.a.error_hint_retry)):d.createElement("span",null,a(f.a.error_hint_critical))},t.prototype.renderTryAgainButton=function(){var e=this.props,t=e.onRetry,a=e.intl.formatMessage;return t?d.createElement(A,{appearance:"primary",onClick:t},a(f.a.try_again)):null},t.prototype.renderCancelButton=function(){var e=this.props,t=e.onCancel,a=e.onRetry,n=e.intl.formatMessage,i=a?f.a.cancel:f.a.close;return d.createElement(A,{appearance:"subtle",onClick:t},n(i))},t}(d.Component),F=Object(u.e)(U);a.d(t,"convertFileNameToPng",function(){return T}),a.d(t,"SmartMediaEditor",function(){return N});var T=function(e){return e?e.endsWith(".png")?e:0===e.lastIndexOf(".")||-1===e.lastIndexOf(".")?e+".png":e.substring(0,e.lastIndexOf("."))+".png":"annotated-image.png"},N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1,hasBeenEdited:!1,closeIntent:!1},t.getFile=function(e){return s.__awaiter(t,void 0,void 0,function(){var t,a,n,i,o,r=this;return s.__generator(this,function(d){switch(d.label){case 0:return t=this.props.context,a=e.collectionName,n=e.occurrenceKey,[4,e.id];case 1:return i=d.sent(),o=t.file.getFileState(i,{collectionName:a,occurrenceKey:n}).subscribe({next:function(t){return s.__awaiter(r,void 0,void 0,function(){var a,n,i,r,d;return s.__generator(this,function(s){switch(s.label){case 0:return"error"===t.status?(this.onError(t.message),setTimeout(function(){return o.unsubscribe()},0),[2]):(a=t.name,n=t.preview,i=t.status,this.fileName=a,"processed"!==i?[3,1]:(this.setRemoteImageUrl(e),setTimeout(function(){return o.unsubscribe()},0),[3,6]));case 1:return n?[4,n]:[3,6];case 2:return(r=s.sent().value)instanceof Blob?[4,Object(w.d)(r)]:[3,4];case 3:return d=s.sent(),this.setState({imageUrl:d}),[3,5];case 4:this.setState({imageUrl:r}),s.label=5;case 5:setTimeout(function(){return o.unsubscribe()},0),s.label=6;case 6:return[2]}})})},error:function(e){r.onError(e)}}),this.getFileSubscription=o,[2]}})})},t.setRemoteImageUrl=function(e){return s.__awaiter(t,void 0,void 0,function(){var t,a,n;return s.__generator(this,function(i){switch(i.label){case 0:return t=this.props.context,[4,e.id];case 1:return a=i.sent(),[4,t.getImageUrl(a,{collection:e.collectionName,mode:"full-fit"})];case 2:return n=i.sent(),this.setState({imageUrl:n}),[2]}})})},t.copyFileToUserCollection=function(e){return s.__awaiter(t,void 0,void 0,function(){var t,a,n,i,o,r,d,l,u;return s.__generator(this,function(s){switch(s.label){case 0:return t=this.props,a=t.context,n=a.config,i=n.userAuthProvider,o=n.authProvider,r=a.file,d=t.identifier.collectionName,i?(l={id:e,collection:d,authProvider:o},u={collection:"recents",authProvider:i,occurrenceKey:c()()},[4,r.copyFile(l,u)]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},t.onSave=function(e,a){var n=t.fileName,i=t.props,o=i.context,r=i.identifier,s=i.onUploadStart,d=i.onFinish,l=i.intl.formatMessage,u=r.collectionName,p={content:e,collection:u,name:T(n)},m=c()(),g=c()(),h={id:m,deferredUploadId:o.file.touchFiles([{fileId:m,collection:u,occurrenceKey:g}],u).then(function(e){return e.created[0].uploadId}),occurrenceKey:g},_=o.file.upload(p,void 0,h).subscribe({next:function(e){"processing"===e.status?(d(),t.copyFileToUserCollection(e.id),setTimeout(function(){return _.unsubscribe()},0)):"failed-processing"!==e.status&&"error"!==e.status||(t.onError(l(f.a.could_not_save_image)),setTimeout(function(){return _.unsubscribe()},0))}});s({id:m,collectionName:u,mediaItemType:"file",occurrenceKey:g},a)},t.onAnyEdit=function(){t.state.hasBeenEdited||t.setState({hasBeenEdited:!0})},t.closeConfirmationDialog=function(){t.setState({closeIntent:!1})},t.closeAnyway=function(){(0,t.props.onFinish)(),t.closeConfirmationDialog()},t.renderDeleteConfirmation=function(){var e=t.props.intl.formatMessage;if(t.state.closeIntent){var a=[{text:e(f.a.annotate_confirmation_close_anyway),onClick:t.closeAnyway},{text:e(f.a.cancel),onClick:t.closeConfirmationDialog}];return d.createElement(m.b,null,d.createElement(g.a,{width:"small",appearance:"danger",heading:e(f.a.annotate_confirmation_heading),actions:a,onClose:t.closeConfirmationDialog},e(f.a.annotate_confirmation_content)))}return null},t.onCancel=function(){t.state.hasBeenEdited?t.setState({closeIntent:!0}):(0,t.props.onFinish)()},t.onError=function(e){t.setState({hasError:!0,errorMessage:e})},t.clickShellNotPass=function(e){e.stopPropagation()},t.renderLoading=function(){return d.createElement(b.g,null,d.createElement(h.a,{size:"large",invertColor:!0}))},t.renderEditor=function(e){return d.createElement(_.default,{imageUrl:e,onSave:t.onSave,onCancel:t.onCancel,onError:t.onError,onAnyEdit:t.onAnyEdit})},t.renderError=function(e){var a=t.props.onFinish;return e instanceof Error&&(e=e.message),d.createElement(F,{message:e,onCancel:a})},t}return s.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props.identifier;this.getFile(e)},t.prototype.componentWillReceiveProps=function(e){var t=this.props,a=t.identifier,n=t.context;e.identifier.id===a.id&&e.context===n||this.getFile(e.identifier)},t.prototype.componentWillUnmount=function(){var e=this.getFileSubscription,t=this.uploadFileSubscription;e&&e.unsubscribe(),t&&t.unsubscribe()},t.prototype.render=function(){var e=this.state,t=e.imageUrl,a=e.hasError,n=e.errorMessage,i=a?this.renderError(n):t?this.renderEditor(t):this.renderLoading();return d.createElement(b.a,{onClick:this.clickShellNotPass},this.renderDeleteConfirmation(),d.createElement(p.a,{keyCode:27,handler:this.onCancel}),i)},t.contextTypes={intl:u.f},t}(d.Component),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.render=function(){var e=Object(u.e)(N),t=d.createElement(e,s.__assign({},this.props));return this.context.intl?t:d.createElement(u.c,{locale:"en"},t)},t}(d.Component);t.default=W},553:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(12),i=Object(n.d)({retry:{id:"fabric.media.retry",defaultMessage:"Retry",description:"Allows user to perform an action again"},failed_to_load:{id:"fabric.media.failed_to_load",defaultMessage:"Failed to load",description:"We show this message when we have an error loading a file"},recent_uploads:{id:"fabric.media.recent_uploads",defaultMessage:"Recent uploads",description:"Title of a section where we show the user recent uploaded files"},upload_file:{id:"fabric.media.upload_file",defaultMessage:"Upload a file",description:"Call to action that initiates the upload of a file"},drag_and_drop_your_files:{id:"fabric.media.drag_and_drop_your_files",defaultMessage:"Drag and drop your files anywhere or",description:"Used to describe the area where the user can drag and drop files to upload"},drop_your_files:{id:"fabric.media.drop_your_files",defaultMessage:"Drop your files to upload",description:"Indicates that the files will be uploaded when the user drops them in the drag and drop area"},upload:{id:"fabric.media.upload",defaultMessage:"Upload",description:"upload"},cancel:{id:"fabric.media.cancel",defaultMessage:"Cancel",description:"cancel"},search_all_gifs:{id:"fabric.media.search_all_gifs",defaultMessage:"Search all the GIFs!",description:"Used as input placeholder to let the user know that they can search for GIF image files"},cant_retrieve_gifs:{id:"fabric.media.cant_retrieve_gifs",defaultMessage:"Ouch! We could not retrieve any GIFs",description:"Error message when we can not find any GIF images for that text"},check_your_network:{id:"fabric.media.check_your_network",defaultMessage:"Check your network connection",description:"Error message when network does not work"},try_again:{id:"fabric.media.try_again",defaultMessage:"Try again",description:"Allow the user to try an action again"},no_gifs_found:{id:"fabric.media.no_gifs_found",defaultMessage:"Hello? Was it me you're looking for?",description:"Not expected error that happens when searching for GIF images"},no_gifs_found_suggestion:{id:"fabric.media.no_gifs_found_suggestion",defaultMessage:'We couldn\'t find anything for "{query}"',description:"There are no results for GIFs matching that query"},load_more_gifs:{id:"fabric.media.load_more_gifs",defaultMessage:"Load more GIFs",description:"Used to load next page of GIF images"},add_account:{id:"fabric.media.add_account",defaultMessage:"Add account",description:"Allows to add a new account"},unlink_account:{id:"fabric.media.unlink_account",defaultMessage:"Unlink Account",description:"Allows to remove a connected account from the user"},upload_file_from:{id:"fabric.media.upload_file_from",defaultMessage:"Upload a file from {name}",description:"Allows to upload a file from different sources"},connect_to:{id:"fabric.media.connect_to",defaultMessage:"Connect to {name}",description:"Allows the user to connect with different types of external services"},connect_account_description:{id:"fabric.media.connect_account_description",defaultMessage:"We'll open a new page to help you connect your {name} account",description:"Explains what will happen when the users connects to a new account"},upload_an_avatar:{id:"fabric.media.upload_an_avatar",defaultMessage:"Upload an avatar",description:"Indicates that the user can upload a new avatar"},save:{id:"fabric.media.save",defaultMessage:"Save",description:'Just the "save" word'},or:{id:"fabric.media.or",defaultMessage:"or",description:'Just the "or" word'},upload_photo:{id:"fabric.media.upload_photo",defaultMessage:"Upload a photo",description:"Call to action for the user to upload a new photo"},default_avatars:{id:"fabric.media.default_avatars",defaultMessage:"Default avatars",description:"Showed above the default avatar list"},drag_and_drop_images_here:{id:"fabric.media.drag_and_drop_images_here",defaultMessage:"Drag and drop your images here",description:"Indicates that the user can drag and drop images in that area"},upload_image:{id:"fabric.media.upload_image",defaultMessage:"Upload image",description:"Call to action for the user to upload a new image"},image_url_invalid_error:{id:"fabric.media.image_url_invalid_error",defaultMessage:"Could not load image, the url is invalid.",description:"There was an error parsing the image url"},image_format_invalid_error:{id:"fabric.media.image_format_invalid_error",defaultMessage:"Could not load image, the format is invalid.",description:"The provided image format is not valid"},image_size_too_large_error:{id:"fabric.media.image_size_too_large_error",defaultMessage:"Image is too large, must be no larger than {MAX_SIZE_MB}Mb",description:"The provided image size is too big"},something_went_wrong:{id:"fabric.media.something_went_wrong",defaultMessage:"Something went wrong.",description:"Showed when an error happen but we dont have more info about it"},might_be_a_hiccup:{id:"fabric.media.might_be_a_hiccup",defaultMessage:"It might just be a hiccup.",description:"Used when an unknow error happens, just in a funny way of saying that we dont have more info about it"},couldnt_generate_preview:{id:"fabric.media.couldnt_generate_preview",defaultMessage:"We couldn't generate a preview for this file.",description:"Error case for when the backend cant generate a preview for that file"},cant_preview_file_type:{id:"fabric.media.cant_preview_file_type",defaultMessage:"We can't preview this file type.",description:"Error case for when we have no available preview for that file"},item_not_found_in_list:{id:"fabric.media.item_not_found_in_list",defaultMessage:"The selected item was not found on the list.",description:"Error case for when a provided item is not found within the list of items"},no_pdf_artifacts:{id:"fabric.media.no_pdf_artifacts",defaultMessage:"No PDF artifacts found for this file.",description:"Error case for when we cant preview a PDF file"},give_feedback:{id:"fabric.media.give_feedback",defaultMessage:"Give feedback",description:"Call to action that opens a popup to get feedback from the users"},try_downloading_file:{id:"fabric.media.try_downloading_file",defaultMessage:"Try downloading the file to view it.",description:"We show this message to allow users to download a file"},webgl_warning_description:{id:"fabric.media.webgl_warning_description",defaultMessage:"Your browser does not support WebGL. Use a WebGL enabled browser to annotate images.",description:"We show this error message when the browser doesnt support this feature"},unable_to_annotate_image:{id:"fabric.media.unable_to_annotate_image",defaultMessage:"You're unable to annotate this image",description:"If there is an error trying to annotate an image we show this"},learn_more:{id:"fabric.media.learn_more",defaultMessage:"Learn More",description:""},accounts:{id:"fabric.media.accounts",defaultMessage:"Accounts",description:""},actions:{id:"fabric.media.actions",defaultMessage:"Actions",description:""},error_hint_retry:{id:"fabric.media.error_hint_retry",defaultMessage:"Try again and we'll give it another shot.",description:"Generic message that we show if an action failed"},error_hint_critical:{id:"fabric.media.error_hint_critical",defaultMessage:"If the problem keeps happening contact support.",description:"We show this error message if we cant recover from the action"},close:{id:"fabric.media.close",defaultMessage:"Close",description:""},could_not_load_editor:{id:"fabric.media.could_not_load_editor",defaultMessage:"Ouch! We could not load the editor",description:"Error message to communicate that we cant load the editor"},could_not_save_image:{id:"fabric.media.could_not_save_image",defaultMessage:"Ouch! We could not save the image",description:"Error message to communicate that we cant save an image"},annotate:{id:"fabric.media.annotate",defaultMessage:"Annotate",description:""},annotate_tool_arrow:{id:"fabric.media.annotate.tool.arrow",defaultMessage:"Arrow",description:""},annotate_tool_text:{id:"fabric.media.annotate.tool.text",defaultMessage:"Text",description:""},annotate_tool_shape:{id:"fabric.media.annotate.tool.shape",defaultMessage:"Shape",description:""},annotate_tool_brush:{id:"fabric.media.annotate.tool.brush",defaultMessage:"Brush",description:""},annotate_tool_blur:{id:"fabric.media.annotate.tool.blur",defaultMessage:"Blur",description:""},annotate_tool_line_thickness:{id:"fabric.media.annotate.tool.line.thickness",defaultMessage:"Line thickness",description:""},annotate_tool_color:{id:"fabric.media.annotate.tool.color",defaultMessage:"Color",description:""},annotate_confirmation_close_anyway:{id:"fabric.media.annotate.confirmation.close.anyway",defaultMessage:"Close anyway",description:""},annotate_confirmation_heading:{id:"fabric.media.annotate.confirmation.heading",defaultMessage:"Unsaved changes",description:""},annotate_confirmation_content:{id:"fabric.media.annotate.confirmation.content",defaultMessage:"You have some unsaved changes. Are you sure you want to leave?",description:""},drop_your_files_here:{id:"fabric.media.drop_your_files_here",defaultMessage:"Drop your files here",description:"Info message that we show to indicate that the user can drag and drop files"},share_files_instantly:{id:"fabric.media.share_files_instantly",defaultMessage:"We'll share them instantly",description:"It means that we will upload the files you drag and drop automatically"},insert_files:{id:"fabric.media.insert_files",defaultMessage:"Insert {0, plural, one {a file} other {{0} files}}",description:"Showed when the user selects 1 or more files to insert"},zoom_out:{id:"fabric.media.zoom_out",defaultMessage:"zoom out",description:"Indicates the user can zoom out a file"},zoom_in:{id:"fabric.media.zoom_in",defaultMessage:"zoom in",description:"Indicates the user can zoom in a file"},remove_image:{id:"fabric.media.remove_image",defaultMessage:"Remove image",description:"Allows the user to remove a file"},play:{id:"fabric.media.play",defaultMessage:"play",description:""},pause:{id:"fabric.media.pause",defaultMessage:"pause",description:""},disable_fullscreen:{id:"fabric.media.disable_fullscreen",defaultMessage:"disable fullscreen",description:"Hint to let the user know they can disable the fullscreen mode"},enable_fullscreen:{id:"fabric.media.enable_fullscreen",defaultMessage:"enable fullscreen",description:"Hint to let the user know they can enable the fullscreen mode"},error_loading_file:{id:"fabric.media.error_loading_file",defaultMessage:"Error loading file",description:"Message showed when we had an error trying to load the file"},error_generating_preview:{id:"fabric.media.error_generating_preview",defaultMessage:"Error generating preview",description:"Message showed when we had an error trying generate a preview for a file"},download:{id:"fabric.media.download",defaultMessage:"Download",description:""},unknown:{id:"fabric.media.unknown",defaultMessage:"unknown",description:""},document:{id:"fabric.media.document",defaultMessage:"document",description:""},audio:{id:"fabric.media.audio",defaultMessage:"audio",description:""},video:{id:"fabric.media.video",defaultMessage:"video",description:""},image:{id:"fabric.media.image",defaultMessage:"image",description:""}})},558:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"a",function(){return r});var n=a(1),i=a(0),o={space:32,m:77},r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.keyHandler=function(e){var a=t.props,n=a.keyCode,i=a.handler;e.keyCode===n&&i()},t.init=function(){document.addEventListener("keydown",t.keyHandler)},t.release=function(){document.removeEventListener("keydown",t.keyHandler)},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.init()},t.prototype.componentWillUnmount=function(){this.release()},t.prototype.render=function(){return null},t}(i.Component)}}]);
//# sourceMappingURL=196.5503333b.chunk.js.map