{"version":3,"sources":["utils/file.ts","components/FileInput.tsx","components/common/PreWrapDiv.tsx","components/common/CustomSVG.tsx","utils/editor.tsx","utils/string.ts","constants/svg.tsx","components/editor/ToolsDrawer.tsx","constants/urls.tsx","components/editor/helphers/selectMockMenu.tsx","components/editor/helphers/extensionHandlers.tsx","components/editor/Editor.tsx","components/App.tsx","index.tsx"],"names":["uploadFile","files","multiple","onChange","fileList","Object","keys","forEach","idx","_idx","Number","file","isNaN","push","reader","FileReader","readAsDataURL","onload","FileInput","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","fileRef","React","fileOnChange","e","_this$props","target","length","setState","state","_this$props2","disabled","isHide","react","className","cn","is-hide","style_default","a","id","type","ref","PreWrapDiv","styled","div","_templateObject","CustomSVG","_ref","width","height","d","viewBox","concat","focusable","role","fill","fillRule","createEditorMenuItem","str","content","elemBefore","onClick","value","name","replace","word","index","toLowerCase","toUpperCase","tooltipDescription","tooltipPosition","common_CustomSVG","TEMP_DATA","ToolsDrawer","fileInputRef","imageUploadRef","transformer","recursiveFileUploadQueue","filesName","toConsumableArray","map","recursiveImageUploadQueue","actions","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","window","URL","createObjectURL","sent","replaceSelection","attrs","layout","stop","_x","apply","arguments","JSONTransformer","isShowEditorValue","jsonDocument","isShowTempDataList","selectedTempDataList","_this2","renderEditor","isImageUpload","_this$state","EditorContext","components_FileInput","WithEditorActions","render","_callee2","getValue","_context2","editorView","obj","encode","doc","JSON","stringify","legacyImageUploadProvider","Promise","resolve","current","click","fileUploadMenuItem","testButtom","data","href","selectedTempData","common_PreWrapDiv","fileName","youtubeReg","vimeoReg","mockInsertMenu","movie","editorActions","prompt","youtubeMatch","match","vimeoMatch","newParameters","extensionType","extensionKey","text","parameters","selectMockMenu","menu","menuItem","extensionHandlers","com.haniplanet.macro.core","ext","src","title","Editor","editor_ToolsDrawer","assign","editor","appearance","insertMenuItems","allowExtension","App","editorValue","editor_Editor","Renderer","document","ReactDOM","react_default","createElement","components_App","getElementById"],"mappings":"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","file":"static/js/main.3322a5e7.chunk.js","sourcesContent":["export const uploadFile = (\n  files: FileList,\n  multiple: boolean,\n  onChange: (fileList: File[]) => void\n) => {\n  const fileList: File[] = [];\n\n  Object.keys(files).forEach(idx => {\n    const _idx = Number(idx);\n    const file = files[_idx];\n\n    if (!isNaN(_idx)) {\n      if (multiple) {\n        fileList.push(file);\n      } else {\n        const reader = new FileReader();\n\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n          const fileList: File[] = [file];\n\n          onChange && onChange(fileList);\n        };\n      }\n    }\n  });\n\n  if (multiple) {\n    onChange && onChange(fileList);\n  }\n};\n","import * as React from \"react\";\nimport cn from \"classnames\";\nimport { uploadFile } from \"../utils/file\";\nimport { IFileResult } from \"../types/file\";\n\ninterface Props {\n  onChange: (fileList: File[]) => void;\n  multiple?: boolean;\n  disabled?: boolean;\n  isHide?: boolean;\n}\n\ntype State = Pick<IFileResult, \"file\">;\n\nclass FileInput extends React.Component<Props, State> {\n  fileRef: React.RefObject<HTMLInputElement> = React.createRef();\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      file: null\n    };\n  }\n\n  fileOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { multiple, onChange } = this.props;\n    const {\n      target: { files }\n    } = e;\n    const file = files[0];\n\n    if (!files.length) return;\n\n    uploadFile(files, multiple, onChange);\n    this.setState({ file });\n  };\n\n  render() {\n    const { multiple, disabled, isHide } = this.props;\n\n    return (\n      <div className={cn({ \"is-hide\": isHide })}>\n        <style jsx>{`\n          div.is-hide {\n            display: none;\n          }\n        `}</style>\n        <input\n          type=\"file\"\n          ref={this.fileRef}\n          onChange={this.fileOnChange}\n          multiple={multiple}\n          disabled={disabled}\n        />\n      </div>\n    );\n  }\n}\n\nexport default FileInput;\n","import styled from \"styled-components\";\n\nconst PreWrapDiv = styled.div`\n  white-space: pre-wrap;\n\n  &:empty:not(:focus)::before {\n    content: attr(data-placeholder);\n    font-size: 14px;\n  }\n`;\n\nexport default PreWrapDiv;\n","import * as React from \"react\";\n\ninterface Props {\n  width: string;\n  height: string;\n  d: string;\n}\n\nconst CustomSVG = ({ width, height, d }: Props) => (\n  <svg\n    width={width}\n    height={height}\n    viewBox={`0 0 ${width} ${height}`}\n    focusable=\"false\"\n    role=\"presentation\"\n  >\n    <path d={d} fill=\"currentColor\" fillRule=\"evenodd\" />\n  </svg>\n);\n\nexport default CustomSVG;\n","import * as React from \"react\";\nimport {\n  InsertMenuCustomItem,\n  ReactComponents\n} from \"@atlaskit/editor-core/types\";\nimport { EditorActions } from \"@atlaskit/editor-core\";\nimport CustomSVG from \"../components/common/CustomSVG\";\nimport { testIcon } from \"../constants/svg\";\nimport { camelize } from \"./string\";\n\ninterface EditorMenuItems {\n  content: string;\n  elemBefore?: ReactComponents;\n  onClick?: (editorActions: EditorActions) => void;\n}\n\nexport const createEditorMenuItem = ({\n  content,\n  elemBefore,\n  onClick\n}: EditorMenuItems): InsertMenuCustomItem => ({\n  content,\n  value: {\n    name: camelize(content)\n  },\n  tooltipDescription: content,\n  tooltipPosition: \"right\",\n  elemBefore: elemBefore || <CustomSVG width=\"24\" height=\"24\" d={testIcon} />,\n  onClick\n});\n","import { Indexable } from \"../types/common\";\n\nexport const jsonPretty = (obj: Indexable) => JSON.stringify(obj, null, 2);\n\nexport const camelize = (str: string) =>\n  str\n    .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (word, index) =>\n      index === 0 ? word.toLowerCase() : word.toUpperCase()\n    )\n    .replace(/\\s+/g, \"\");\n","export const testIcon =\n  \"M10.208 7.308a1.09 1.09 0 0 1 0 1.483l-3.515 3.71 3.515 3.708a1.09 1.09 0 0 1 0 1.483.957.957 0 0 1-1.405 0l-3.866-4.08a1.635 1.635 0 0 1 0-2.225l3.866-4.08a.957.957 0 0 1 1.405 0zm3.584 0a.957.957 0 0 1 1.405 0l3.866 4.08c.583.614.583 1.61 0 2.225l-3.866 4.08a.957.957 0 0 1-1.405 0 1.09 1.09 0 0 1 0-1.484l3.515-3.708-3.515-3.71a1.09 1.09 0 0 1 0-1.483z\";\n","import * as React from \"react\";\nimport {\n  EditorContext,\n  WithEditorActions,\n  EditorActions\n} from \"@atlaskit/editor-core\";\nimport { JSONTransformer } from \"@atlaskit/editor-json-transformer\";\nimport { InsertMenuCustomItem } from \"@atlaskit/editor-core/types\";\nimport { ImageUploadHandler } from \"@atlaskit/editor-core/plugins/image-upload/types\";\nimport { EditorView } from \"prosemirror-view\";\nimport FileInput from \"../FileInput\";\nimport PreWrapDiv from \"../common/PreWrapDiv\";\nimport { jsonPretty } from \"../../utils/string\";\nimport { EditorProps } from \"./Editor\";\nimport { createEditorMenuItem } from \"../../utils/editor\";\n\ninterface RenderEditor {\n  onChange: (editorView: EditorView<any>) => void;\n  legacyImageUploadProvider: Promise<ImageUploadHandler>;\n  fileUploadMenuItem: InsertMenuCustomItem;\n  testButtom: InsertMenuCustomItem;\n}\n\ninterface Props extends EditorProps {\n  renderEditor: (params: RenderEditor) => React.ReactNode;\n  isImageUpload?: boolean;\n}\n\ninterface State {\n  isShowEditorValue: boolean;\n  jsonDocument: string;\n  filesName: string[];\n\n  isShowTempDataList: boolean;\n  selectedTempDataList: string[];\n}\n\nconst TEMP_DATA = [\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\", \"Item 5\"];\n\nclass ToolsDrawer extends React.Component<Props, State> {\n  fileInputRef: React.RefObject<FileInput> = React.createRef();\n  imageUploadRef: React.RefObject<FileInput> = React.createRef();\n  transformer: JSONTransformer;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.transformer = new JSONTransformer();\n    this.state = {\n      isShowEditorValue: false,\n      jsonDocument: \"{}\",\n      filesName: [],\n      isShowTempDataList: false,\n      selectedTempDataList: []\n    };\n  }\n\n  recursiveFileUploadQueue = (fileList: File[]) => {\n    const { filesName } = this.state;\n\n    this.setState({\n      filesName: [...filesName, ...fileList.map(file => file.name)]\n    });\n  };\n\n  recursiveImageUploadQueue = (fileList: File[], actions: EditorActions) =>\n    fileList.forEach(async file => {\n      const url = await window.URL.createObjectURL(file);\n\n      actions.replaceSelection({\n        type: \"mediaSingle\",\n        attrs: { layout: \"center\" },\n        content: [\n          {\n            type: \"media\",\n            attrs: {\n              type: \"external\",\n              url\n            }\n          }\n        ]\n      });\n    });\n\n  render() {\n    const { renderEditor, isImageUpload } = this.props;\n    const {\n      isShowEditorValue,\n      filesName,\n\n      isShowTempDataList,\n      selectedTempDataList\n    } = this.state;\n\n    return (\n      <EditorContext>\n        <>\n          <button\n            onClick={() => {\n              this.setState({\n                isShowEditorValue: !isShowEditorValue\n              });\n            }}\n          >\n            Show/Hide JSON Data\n          </button>\n          <FileInput\n            ref={this.fileInputRef}\n            onChange={this.recursiveFileUploadQueue}\n            multiple\n            isHide\n          />\n          <WithEditorActions\n            render={actions => (\n              <>\n                <button\n                  onClick={async () => {\n                    const { getValue } = this.props;\n                    const value = await actions.getValue();\n\n                    getValue(value);\n                  }}\n                >\n                  Save\n                </button>\n                {isImageUpload && (\n                  <FileInput\n                    ref={this.imageUploadRef}\n                    onChange={file =>\n                      this.recursiveImageUploadQueue(file, actions)\n                    }\n                    multiple\n                    isHide\n                  />\n                )}\n              </>\n            )}\n          />\n          {renderEditor({\n            onChange: editorView => {\n              const jsonDocument = jsonPretty(\n                this.transformer.encode(editorView.state.doc)\n              );\n\n              this.setState({ jsonDocument });\n            },\n            legacyImageUploadProvider:\n              isImageUpload &&\n              Promise.resolve(() =>\n                this.imageUploadRef.current.fileRef.current.click()\n              ),\n            fileUploadMenuItem: createEditorMenuItem({\n              content: \"File Upload\",\n              onClick: () => this.fileInputRef.current.fileRef.current.click()\n            }),\n            testButtom: createEditorMenuItem({\n              content: \"Test Button\",\n              onClick: () => {\n                this.setState({ isShowTempDataList: true });\n              }\n            })\n          })}\n          {isShowTempDataList && (\n            <ul>\n              {TEMP_DATA.map(data => (\n                <li\n                  onClick={() => {\n                    this.setState({\n                      isShowTempDataList: false,\n                      selectedTempDataList: [...selectedTempDataList, data]\n                    });\n                  }}\n                >\n                  <a href=\"#\">{data}</a>\n                </li>\n              ))}\n            </ul>\n          )}\n          {selectedTempDataList && (\n            <ul>\n              {selectedTempDataList.map(selectedTempData => (\n                <li>{selectedTempData}</li>\n              ))}\n            </ul>\n          )}\n          {isShowEditorValue && (\n            <PreWrapDiv>{this.state.jsonDocument}</PreWrapDiv>\n          )}\n          {!!filesName.length && (\n            <ul>\n              {filesName.map(fileName => (\n                <li>{fileName}</li>\n              ))}\n            </ul>\n          )}\n        </>\n      </EditorContext>\n    );\n  }\n}\n\nexport default ToolsDrawer;\n","/* eslint-disable no-useless-escape */\nexport const youtubeReg = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\nexport const vimeoReg = /(?:vimeo)\\.com.*(?:videos|video|channels|)\\/([\\d]+)/i;\n","import { youtubeReg, vimeoReg } from \"../../../constants/urls\";\nimport { InsertMenuCustomItem } from \"@atlaskit/editor-core/types\";\nimport { createEditorMenuItem } from \"../../../utils/editor\";\n\ninterface Params {\n  type: string;\n  url: any;\n}\n\ntype MockMenuItem = \"movie\";\n\ntype SelectMockMenu = MockMenuItem[];\n\ninterface MockInsertMenu {\n  [key: string]: InsertMenuCustomItem;\n}\n\nconst mockInsertMenu: MockInsertMenu = {\n  movie: createEditorMenuItem({\n    content: \"Movie extension\",\n    onClick: editorActions => {\n      const url = prompt(\"Input Url\") || \"\";\n      const youtubeMatch = url.match(youtubeReg);\n      const vimeoMatch = url.match(vimeoReg);\n      const newParameters: Params = {} as Params;\n\n      if (youtubeMatch && youtubeMatch[2].length === 11) {\n        newParameters.type = \"youtube\";\n        newParameters.url = youtubeMatch;\n      } else if (vimeoMatch && url[1]) {\n        newParameters.type = \"vimeo\";\n        newParameters.url = vimeoMatch;\n      } else {\n        return null;\n      }\n\n      editorActions.replaceSelection({\n        type: \"extension\",\n        attrs: {\n          extensionType: \"com.haniplanet.macro.core\",\n          extensionKey: \"movie\",\n          text: \"Movie extension\",\n          parameters: newParameters\n        }\n      });\n    }\n  })\n};\n\nconst selectMockMenu = (menu: SelectMockMenu): InsertMenuCustomItem[] =>\n  menu.map(menuItem => mockInsertMenu[menuItem]);\n\nexport default selectMockMenu;\n","import * as React from \"react\";\nimport { ExtensionHandlers } from \"@atlaskit/editor-common\";\n\ninterface Movie {\n  id: string;\n  src: string;\n}\n\nconst extensionHandlers: ExtensionHandlers = {\n  \"com.haniplanet.macro.core\": (ext, doc) => {\n    const { extensionKey, parameters } = ext;\n\n    switch (extensionKey) {\n      case \"movie\":\n        const { type, url } = parameters;\n        const movie: Movie = {} as Movie;\n\n        if (type === \"youtube\") {\n          movie.id = url[2];\n          movie.src = \"//www.youtube.com/embed/\";\n        } else if (type === \"vimeo\") {\n          movie.id = url[1];\n          movie.src = \"//player.vimeo.com/video/\";\n        } else {\n          return null;\n        }\n\n        return (\n          <div>\n            <iframe\n              title={`movie-${movie.id}`}\n              width=\"560\"\n              height=\"315\"\n              src={movie.src + movie.id}\n            />\n          </div>\n        );\n      default:\n        return null;\n    }\n  }\n};\n\nexport default extensionHandlers;\n","import * as React from \"react\";\nimport { Editor as EditorCore } from \"@atlaskit/editor-core\";\nimport ToolsDrawer from \"./ToolsDrawer\";\nimport selectMockMenu from \"./helphers/selectMockMenu\";\nimport extensionHandlers from \"./helphers/extensionHandlers\";\n\nexport interface EditorProps {\n  getValue: (value: string) => void;\n}\n\nconst Editor = (props: EditorProps) => (\n  <ToolsDrawer\n    isImageUpload\n    renderEditor={({\n      onChange,\n      legacyImageUploadProvider,\n      fileUploadMenuItem,\n      testButtom\n    }) => (\n      <EditorCore\n        appearance=\"comment\"\n        extensionHandlers={extensionHandlers}\n        insertMenuItems={[\n          ...selectMockMenu([\"movie\"]),\n          fileUploadMenuItem,\n          testButtom\n        ]}\n        onChange={onChange}\n        legacyImageUploadProvider={legacyImageUploadProvider}\n        allowExtension\n      />\n    )}\n    {...props}\n  />\n);\n\nexport default Editor;\n","import * as React from \"react\";\nimport { ReactRenderer } from \"@atlaskit/renderer\";\nimport Editor from \"./editor/Editor\";\nimport extensionHandlers from \"./editor/helphers/extensionHandlers\";\n\ntype Props = {};\n\ninterface State {\n  editorValue: string;\n}\n\nclass App extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      editorValue: \"\"\n    };\n  }\n\n  render() {\n    return (\n      <>\n        <Editor getValue={editorValue => this.setState({ editorValue })} />\n        <ReactRenderer\n          document={this.state.editorValue}\n          extensionHandlers={extensionHandlers}\n        />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}